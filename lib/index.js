"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,e=(t=require("util"))&&"object"==typeof t&&"default"in t?t.default:t;function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function c(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function d(t,e){return t(e={exports:{}},e.exports),e.exports}var l=function(t){};"production"!==process.env.NODE_ENV&&(l=function(t){if(void 0===t)throw new Error("invariant requires an error message argument")});var f=function(t,e,r,n,a,o,i,s){if(l(e),!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,a,o,i,s],d=0;(u=new Error(e.replace(/%s/g,(function(){return c[d++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}},p=d((function(t,e){e.__esModule=!0;var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}return t.prototype.register=function(t){var e="ID_"+this._lastID++;return this._callbacks[e]=t,e},t.prototype.unregister=function(t){this._callbacks[t]||("production"!==process.env.NODE_ENV?f(!1,"Dispatcher.unregister(...): `%s` does not map to a registered callback.",t):f(!1)),delete this._callbacks[t]},t.prototype.waitFor=function(t){this._isDispatching||("production"!==process.env.NODE_ENV?f(!1,"Dispatcher.waitFor(...): Must be invoked while dispatching."):f(!1));for(var e=0;e<t.length;e++){var r=t[e];this._isPending[r]?this._isHandled[r]||("production"!==process.env.NODE_ENV?f(!1,"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",r):f(!1)):(this._callbacks[r]||("production"!==process.env.NODE_ENV?f(!1,"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",r):f(!1)),this._invokeCallback(r))}},t.prototype.dispatch=function(t){this._isDispatching&&("production"!==process.env.NODE_ENV?f(!1,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."):f(!1)),this._startDispatching(t);try{for(var e in this._callbacks)this._isPending[e]||this._invokeCallback(e)}finally{this._stopDispatching()}},t.prototype.isDispatching=function(){return this._isDispatching},t.prototype._invokeCallback=function(t){this._isPending[t]=!0,this._callbacks[t](this._pendingPayload),this._isHandled[t]=!0},t.prototype._startDispatching=function(t){for(var e in this._callbacks)this._isPending[e]=!1,this._isHandled[e]=!1;this._pendingPayload=t,this._isDispatching=!0},t.prototype._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},t}();t.exports=r}));c(p);var v=new p,h=function(t,e){return{type:"replace_tx_note",payload:{txHash:t,note:e}}},y=function(t){return{type:"remove_tx",payload:t}},g=function(t,e){return{type:"address_tags_and_note_replace",payload:{address:t,tags:e.tags,note:e.note}}},_=function(t,e){return{type:"address_tag_add",payload:{address:t,tag:e}}},m=function(t,e){return{type:"address_tag_remove",payload:{address:t,tag:e}}},b=function(t){return{type:"address_remove",payload:t}},j=function(t){return{type:"userinfo_username_update",payload:t}},S=function(t){return{type:"toggle_push_changes",payload:t}},T=function(t){return{type:"sync_changes",payload:t}},w=function(){return{type:"reset_from_store"}},A=function(){v.dispatch(S(!1)),v.dispatch({type:"reset_from_store"}),v.dispatch(S(!0))},O=function(t){return{type:"reset_from_data",payload:t}},D=function(t){v.dispatch(S(!1)),v.dispatch(O(t)),v.dispatch(S(!0))},N=function(t){return{type:"update_last_sync_time",payload:t}},x=function(){return{type:"clear_database"}},E=function(){return{type:"mark_all_as_dirty"}},k=function(t){return{type:"toggle_show_dialog_help",payload:t}},R=function(t,e,r){return{type:"update_dirty_status",payload:i({},r,{from:t,to:e})}},F=function(t){return{type:"toggle_sync_tags_and_notes",payload:t}},C=Object.freeze({__proto__:null,ADD_ADDRESS_TAG:"address_tag_add",CLEAR_DATABASE:"clear_database",MARK_ALL_AS_DIRTY:"mark_all_as_dirty",REMOVE_ADDRESS:"address_remove",REMOVE_ADDRESS_TAG:"address_tag_remove",REMOVE_TX:"remove_tx",REPLACE_ADDRESS_TAGS_AND_NOTE:"address_tags_and_note_replace",REPLACE_TX_NOTE:"replace_tx_note",RESET_FROM_DATA:"reset_from_data",RESET_FROM_STORE:"reset_from_store",SYNC_CHANGES:"sync_changes",TOGGLE_PUSH_CHANGES:"toggle_push_changes",TOGGLE_SHOW_DIALOG_HELP:"toggle_show_dialog_help",TOGGLE_SYNC_TAGS_AND_NOTES:"toggle_sync_tags_and_notes",UPDATE_DIRTY_STATUS:"update_dirty_status",UPDATE_LAST_SYNC_TIME:"update_last_sync_time",UPDATE_USERNAME:"userinfo_username_update",replaceTxNote:h,boundReplaceTxNote:function(t,e){return v.dispatch(h(t,e))},removeTx:y,boundRemoveTx:function(t){return v.dispatch(y(t))},replaceAddressTagsAndNote:g,boundReplaceAddressTagsAndNote:function(t,e){return v.dispatch(g(t,e))},addAddressTag:_,boundAddAddressTag:function(t,e){return v.dispatch(_(t,e))},removeAddressTag:m,boundRemoveAddressTag:function(t,e){return v.dispatch(m(t,e))},removeAddress:b,boundRemoveAddress:function(t){return v.dispatch(b(t))},updateUserName:j,boundUpdateUserName:function(t){return v.dispatch(j(t))},togglePushChanges:S,syncChanges:T,boundSyncChanges:function(t){v.dispatch(S(!1)),v.dispatch(T(t)),v.dispatch(S(!0))},resetFromStore:w,boundResetFromStore:A,resetFromData:O,boundResetFromData:D,updateLastSyncTime:N,boundUpdateLastSyncTime:function(t){return v.dispatch(N(t))},clearDatabase:x,boundClearDatabase:function(){v.dispatch(S(!1)),v.dispatch({type:"clear_database"}),v.dispatch(S(!0))},markAllAsDirty:E,boundMarkAllAsDirty:function(){v.dispatch(S(!1)),v.dispatch({type:"mark_all_as_dirty"}),v.dispatch(S(!0))},toggleShowDialogHelp:k,boundToggleShowDialogHelp:function(t){return v.dispatch(k(t))},updateDirtyStatus:R,boundUpdateDirtyStatus:function(t,e,r){return v.dispatch(R(t,e,r))},toggleSyncTagsAndNotes:F,boundToggleSyncTagsAndNotes:function(t){return v.dispatch(F(t))}}),P=d((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){if(!r)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(n)};var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),n=new Uint8Array(16);t.exports=e.default}));c(P);var U=d((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);var a=function(t,e){var n=e||0,a=r;return[a[t[n++]],a[t[n++]],a[t[n++]],a[t[n++]],"-",a[t[n++]],a[t[n++]],"-",a[t[n++]],a[t[n++]],"-",a[t[n++]],a[t[n++]],"-",a[t[n++]],a[t[n++]],a[t[n++]],a[t[n++]],a[t[n++]],a[t[n++]]].join("")};e.default=a,t.exports=e.default}));c(U);var I=d((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(P),n=a(U);function a(t){return t&&t.__esModule?t:{default:t}}var o=function(t,e,a){var o=e&&a||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var i=(t=t||{}).random||(t.rng||r.default)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e)for(var s=0;s<16;++s)e[o+s]=i[s];return e||(0,n.default)(i)};e.default=o,t.exports=e.default}));c(I);var M=e.deprecate(I,"Deep requiring like `const uuidv4 = require('uuid/v4');` is deprecated as of uuid@7.x. Please require the top-level module when using the Node.js CommonJS module or use ECMAScript Modules when bundling for the browser. See https://github.com/uuidjs/uuid#deep-requires-now-deprecated for more information."),H=d((function(t){!function(e,r){var n={version:"2.11.0",areas:{},apis:{},inherit:function(t,e){for(var r in t)e.hasOwnProperty(r)||Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));return e},stringify:function(t){return void 0===t||"function"==typeof t?t+"":JSON.stringify(t)},parse:function(t,e){try{return JSON.parse(t,e||n.revive)}catch(e){return t}},fn:function(t,e){for(var r in n.storeAPI[t]=e,n.apis)n.apis[r][t]=e},get:function(t,e){return t.getItem(e)},set:function(t,e,r){t.setItem(e,r)},remove:function(t,e){t.removeItem(e)},key:function(t,e){return t.key(e)},length:function(t){return t.length},clear:function(t){t.clear()},Store:function(t,e,r){var a=n.inherit(n.storeAPI,(function(t,e,r){return 0===arguments.length?a.getAll():"function"==typeof e?a.transact(t,e,r):void 0!==e?a.set(t,e,r):"string"==typeof t||"number"==typeof t?a.get(t):"function"==typeof t?a.each(t):t?a.setAll(t,e):a.clear()}));a._id=t;try{e.setItem("_-bad-_","wolf"),a._area=e,e.removeItem("_-bad-_")}catch(t){}return a._area||(a._area=n.storage("fake")),a._ns=r||"",n.areas[t]||(n.areas[t]=a._area),n.apis[a._ns+a._id]||(n.apis[a._ns+a._id]=a),a},storeAPI:{area:function(t,e){var r=this[t];return r&&r.area||(r=n.Store(t,e,this._ns),this[t]||(this[t]=r)),r},namespace:function(t,e){if(!t)return this._ns?this._ns.substring(0,this._ns.length-1):"";var r=t,a=this[r];if(!(a&&a.namespace||(a=n.Store(this._id,this._area,this._ns+r+"."),this[r]||(this[r]=a),e)))for(var o in n.areas)a.area(o,n.areas[o]);return a},isFake:function(){return"fake"===this._area.name},toString:function(){return"store"+(this._ns?"."+this.namespace():"")+"["+this._id+"]"},has:function(t){return this._area.has?this._area.has(this._in(t)):!!(this._in(t)in this._area)},size:function(){return this.keys().length},each:function(t,e){for(var r=0,a=n.length(this._area);r<a;r++){var o=this._out(n.key(this._area,r));if(void 0!==o&&!1===t.call(this,o,this.get(o),e))break;a>n.length(this._area)&&(a--,r--)}return e||this},keys:function(t){return this.each((function(t,e,r){r.push(t)}),t||[])},get:function(t,e){var r,a=n.get(this._area,this._in(t));return"function"==typeof e&&(r=e,e=null),null!==a?n.parse(a,r):e||a},getAll:function(t){return this.each((function(t,e,r){r[t]=e}),t||{})},transact:function(t,e,r){var n=this.get(t,r),a=e(n);return this.set(t,void 0===a?n:a),this},set:function(t,e,r){var a=this.get(t);return null!=a&&!1===r?e:n.set(this._area,this._in(t),n.stringify(e),r)||a},setAll:function(t,e){var r,n;for(var a in t)n=t[a],this.set(a,n,e)!==n&&(r=!0);return r},add:function(t,e){var r=this.get(t);if(r instanceof Array)e=r.concat(e);else if(null!==r){var a=typeof r;if(a===typeof e&&"object"===a){for(var o in e)r[o]=e[o];e=r}else e=r+e}return n.set(this._area,this._in(t),n.stringify(e)),e},remove:function(t,e){var r=this.get(t,e);return n.remove(this._area,this._in(t)),r},clear:function(){return this._ns?this.each((function(t){n.remove(this._area,this._in(t))}),1):n.clear(this._area),this},clearAll:function(){var t=this._area;for(var e in n.areas)n.areas.hasOwnProperty(e)&&(this._area=n.areas[e],this.clear());return this._area=t,this},_in:function(t){return"string"!=typeof t&&(t=n.stringify(t)),this._ns?this._ns+t:t},_out:function(t){return this._ns?t&&0===t.indexOf(this._ns)?t.substring(this._ns.length):void 0:t}},storage:function(t){return n.inherit(n.storageAPI,{items:{},name:t})},storageAPI:{length:0,has:function(t){return this.items.hasOwnProperty(t)},key:function(t){var e=0;for(var r in this.items)if(this.has(r)&&t===e++)return r},setItem:function(t,e){this.has(t)||this.length++,this.items[t]=e},removeItem:function(t){this.has(t)&&(delete this.items[t],this.length--)},getItem:function(t){return this.has(t)?this.items[t]:null},clear:function(){for(var t in this.items)this.removeItem(t)}}},a=n.Store("local",function(){try{return localStorage}catch(t){}}());a.local=a,a._=n,a.area("session",function(){try{return sessionStorage}catch(t){}}()),a.area("page",n.storage("page")),"function"==typeof r&&void 0!==r.amd?r("store2",[],(function(){return a})):t.exports?t.exports=a:(e.store&&(n.conflict=e.store),e.store=a)}(u,u&&u.define)})),L=new(function(){function t(){var t=M(),e=H("ethpuuid")||(H("ethpuuid",t),t);this._store=H.namespace(e)}var e=t.prototype;return e.store=function(){return this._store.apply(this,arguments)},e.userId=function(){return this._store.namespace()},e.reset=function(t){void 0===t&&(t=M());var e=this._store;H("ethpuuid",t),this._store=H.namespace(t),e.clearAll()},e.clear=function(){this._store.clearAll()},e.switch=function(t){t&&(H("ethpuuid",t),this._store=H.namespace(t))},t}());var K=function(t){function e(r,n,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t.call(this,r),this.listener=n,this.context=a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.subscriber=e}return t.prototype.remove=function(){this.subscriber&&(this.subscriber.removeSubscription(this),this.subscriber=null)},t}());var V=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._subscriptionsForType={},this._currentSubscription=null}return t.prototype.addSubscription=function(t,e){e.subscriber!==this&&("production"!==process.env.NODE_ENV?f(!1,"The subscriber of the subscription is incorrectly set."):f(!1)),this._subscriptionsForType[t]||(this._subscriptionsForType[t]=[]);var r=this._subscriptionsForType[t].length;return this._subscriptionsForType[t].push(e),e.eventType=t,e.key=r,e},t.prototype.removeAllSubscriptions=function(t){void 0===t?this._subscriptionsForType={}:delete this._subscriptionsForType[t]},t.prototype.removeSubscription=function(t){var e=t.eventType,r=t.key,n=this._subscriptionsForType[e];n&&delete n[r]},t.prototype.getSubscriptionsForType=function(t){return this._subscriptionsForType[t]},t}();function z(t){return function(){return t}}var J=function(){};J.thatReturns=z,J.thatReturnsFalse=z(!1),J.thatReturnsTrue=z(!0),J.thatReturnsNull=z(null),J.thatReturnsThis=function(){return this},J.thatReturnsArgument=function(t){return t};var B=J;var G={EventEmitter:function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._subscriber=new V,this._currentSubscription=null}return t.prototype.addListener=function(t,e,r){return this._subscriber.addSubscription(t,new K(this._subscriber,e,r))},t.prototype.once=function(t,e,r){var n=this;return this.addListener(t,(function(){n.removeCurrentListener(),e.apply(r,arguments)}))},t.prototype.removeAllListeners=function(t){this._subscriber.removeAllSubscriptions(t)},t.prototype.removeCurrentListener=function(){this._currentSubscription||("production"!==process.env.NODE_ENV?f(!1,"Not in an emitting cycle; there is no current subscription"):f(!1)),this._subscriber.removeSubscription(this._currentSubscription)},t.prototype.listeners=function(t){var e=this._subscriber.getSubscriptionsForType(t);return e?e.filter(B.thatReturnsTrue).map((function(t){return t.listener})):[]},t.prototype.emit=function(t){var e=this._subscriber.getSubscriptionsForType(t);if(e){for(var r=Object.keys(e),n=0;n<r.length;n++){var a=r[n],o=e[a];o&&(this._currentSubscription=o,this.__emitToSubscription.apply(this,[o].concat(Array.prototype.slice.call(arguments))))}this._currentSubscription=null}},t.prototype.__emitToSubscription=function(t,e){var r=Array.prototype.slice.call(arguments,2);t.listener.apply(t.context,r)},t}(),EmitterSubscription:K}.EventEmitter,q=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.__className=this.constructor.name,this.__changed=!1,this.__changeEvent="change",this.__dispatcher=e,this.__emitter=new G,this._dispatchToken=e.register((function(t){r.__invokeOnDispatch(t)}))}return t.prototype.addListener=function(t){return this.__emitter.addListener(this.__changeEvent,t)},t.prototype.getDispatcher=function(){return this.__dispatcher},t.prototype.getDispatchToken=function(){return this._dispatchToken},t.prototype.hasChanged=function(){return this.__dispatcher.isDispatching()||("production"!==process.env.NODE_ENV?f(!1,"%s.hasChanged(): Must be invoked while dispatching.",this.__className):f(!1)),this.__changed},t.prototype.__emitChange=function(){this.__dispatcher.isDispatching()||("production"!==process.env.NODE_ENV?f(!1,"%s.__emitChange(): Must be invoked while dispatching.",this.__className):f(!1)),this.__changed=!0},t.prototype.__invokeOnDispatch=function(t){this.__changed=!1,this.__onDispatch(t),this.__changed&&this.__emitter.emit(this.__changeEvent)},t.prototype.__onDispatch=function(t){"production"!==process.env.NODE_ENV?f(!1,"%s has not overridden FluxStore.__onDispatch(), which is required",this.__className):f(!1)},t}();var $=function(t,e){"production"!==process.env.NODE_ENV?f(!1,"Subclasses of %s must override %s() with their own implementation.",t,e):f(!1)};var W=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t.call(this,r),this._state=this.getInitialState()}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.getState=function(){return this._state},e.prototype.getInitialState=function(){return $("FluxReduceStore","getInitialState")},e.prototype.reduce=function(t,e){return $("FluxReduceStore","reduce")},e.prototype.areEqual=function(t,e){return t===e},e.prototype.__invokeOnDispatch=function(t){this.__changed=!1;var e=this._state,r=this.reduce(e,t);void 0===r&&("production"!==process.env.NODE_ENV?f(!1,"%s returned undefined from reduce(...), did you forget to return state in the default case? (use null if this was intentional)",this.constructor.name):f(!1)),this.areEqual(e,r)||(this._state=r,this.__emitChange()),this.__changed&&this.__emitter.emit(this.__changeEvent)},e}(q);var Y=function(){this.__data__=[],this.size=0};var X=function(t,e){return t===e||t!=t&&e!=e};var Q=function(t,e){for(var r=t.length;r--;)if(X(t[r][0],e))return r;return-1},Z=Array.prototype.splice;var tt=function(t){var e=this.__data__,r=Q(e,t);return!(r<0)&&(r==e.length-1?e.pop():Z.call(e,r,1),--this.size,!0)};var et=function(t){var e=this.__data__,r=Q(e,t);return r<0?void 0:e[r][1]};var rt=function(t){return Q(this.__data__,t)>-1};var nt=function(t,e){var r=this.__data__,n=Q(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function at(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}at.prototype.clear=Y,at.prototype.delete=tt,at.prototype.get=et,at.prototype.has=rt,at.prototype.set=nt;var ot=at;var it=function(){this.__data__=new ot,this.size=0};var st=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};var ut=function(t){return this.__data__.get(t)};var ct=function(t){return this.__data__.has(t)},dt="object"==typeof u&&u&&u.Object===Object&&u,lt="object"==typeof self&&self&&self.Object===Object&&self,ft=dt||lt||Function("return this")(),pt=ft.Symbol,vt=Object.prototype,ht=vt.hasOwnProperty,yt=vt.toString,gt=pt?pt.toStringTag:void 0;var _t=function(t){var e=ht.call(t,gt),r=t[gt];try{t[gt]=void 0;var n=!0}catch(t){}var a=yt.call(t);return n&&(e?t[gt]=r:delete t[gt]),a},mt=Object.prototype.toString;var bt=function(t){return mt.call(t)},jt=pt?pt.toStringTag:void 0;var St=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":jt&&jt in Object(t)?_t(t):bt(t)};var Tt=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var wt,At=function(t){if(!Tt(t))return!1;var e=St(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},Ot=ft["__core-js_shared__"],Dt=(wt=/[^.]+$/.exec(Ot&&Ot.keys&&Ot.keys.IE_PROTO||""))?"Symbol(src)_1."+wt:"";var Nt=function(t){return!!Dt&&Dt in t},xt=Function.prototype.toString;var Et=function(t){if(null!=t){try{return xt.call(t)}catch(t){}try{return t+""}catch(t){}}return""},kt=/^\[object .+?Constructor\]$/,Rt=Function.prototype,Ft=Object.prototype,Ct=Rt.toString,Pt=Ft.hasOwnProperty,Ut=RegExp("^"+Ct.call(Pt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var It=function(t){return!(!Tt(t)||Nt(t))&&(At(t)?Ut:kt).test(Et(t))};var Mt=function(t,e){return null==t?void 0:t[e]};var Ht=function(t,e){var r=Mt(t,e);return It(r)?r:void 0},Lt=Ht(ft,"Map"),Kt=Ht(Object,"create");var Vt=function(){this.__data__=Kt?Kt(null):{},this.size=0};var zt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Jt=Object.prototype.hasOwnProperty;var Bt=function(t){var e=this.__data__;if(Kt){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return Jt.call(e,t)?e[t]:void 0},Gt=Object.prototype.hasOwnProperty;var qt=function(t){var e=this.__data__;return Kt?void 0!==e[t]:Gt.call(e,t)};var $t=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Kt&&void 0===e?"__lodash_hash_undefined__":e,this};function Wt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Wt.prototype.clear=Vt,Wt.prototype.delete=zt,Wt.prototype.get=Bt,Wt.prototype.has=qt,Wt.prototype.set=$t;var Yt=Wt;var Xt=function(){this.size=0,this.__data__={hash:new Yt,map:new(Lt||ot),string:new Yt}};var Qt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var Zt=function(t,e){var r=t.__data__;return Qt(e)?r["string"==typeof e?"string":"hash"]:r.map};var te=function(t){var e=Zt(this,t).delete(t);return this.size-=e?1:0,e};var ee=function(t){return Zt(this,t).get(t)};var re=function(t){return Zt(this,t).has(t)};var ne=function(t,e){var r=Zt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function ae(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ae.prototype.clear=Xt,ae.prototype.delete=te,ae.prototype.get=ee,ae.prototype.has=re,ae.prototype.set=ne;var oe=ae;var ie=function(t,e){var r=this.__data__;if(r instanceof ot){var n=r.__data__;if(!Lt||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new oe(n)}return r.set(t,e),this.size=r.size,this};function se(t){var e=this.__data__=new ot(t);this.size=e.size}se.prototype.clear=it,se.prototype.delete=st,se.prototype.get=ut,se.prototype.has=ct,se.prototype.set=ie;var ue=se;var ce=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var de=function(t){return this.__data__.has(t)};function le(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new oe;++e<r;)this.add(t[e])}le.prototype.add=le.prototype.push=ce,le.prototype.has=de;var fe=le;var pe=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1};var ve=function(t,e){return t.has(e)};var he=function(t,e,r,n,a,o){var i=1&r,s=t.length,u=e.length;if(s!=u&&!(i&&u>s))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var d=-1,l=!0,f=2&r?new fe:void 0;for(o.set(t,e),o.set(e,t);++d<s;){var p=t[d],v=e[d];if(n)var h=i?n(v,p,d,e,t,o):n(p,v,d,t,e,o);if(void 0!==h){if(h)continue;l=!1;break}if(f){if(!pe(e,(function(t,e){if(!ve(f,e)&&(p===t||a(p,t,r,n,o)))return f.push(e)}))){l=!1;break}}else if(p!==v&&!a(p,v,r,n,o)){l=!1;break}}return o.delete(t),o.delete(e),l},ye=ft.Uint8Array;var ge=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r};var _e=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r},me=pt?pt.prototype:void 0,be=me?me.valueOf:void 0;var je=function(t,e,r,n,a,o,i){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new ye(t),new ye(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return X(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=ge;case"[object Set]":var u=1&n;if(s||(s=_e),t.size!=e.size&&!u)return!1;var c=i.get(t);if(c)return c==e;n|=2,i.set(t,e);var d=he(s(t),s(e),n,a,o,i);return i.delete(t),d;case"[object Symbol]":if(be)return be.call(t)==be.call(e)}return!1};var Se=function(t,e){for(var r=-1,n=e.length,a=t.length;++r<n;)t[a+r]=e[r];return t},Te=Array.isArray;var we=function(t,e,r){var n=e(t);return Te(t)?n:Se(n,r(t))};var Ae=function(t,e){for(var r=-1,n=null==t?0:t.length,a=0,o=[];++r<n;){var i=t[r];e(i,r,t)&&(o[a++]=i)}return o};var Oe=function(){return[]},De=Object.prototype.propertyIsEnumerable,Ne=Object.getOwnPropertySymbols,xe=Ne?function(t){return null==t?[]:(t=Object(t),Ae(Ne(t),(function(e){return De.call(t,e)})))}:Oe;var Ee=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n};var ke=function(t){return null!=t&&"object"==typeof t};var Re=function(t){return ke(t)&&"[object Arguments]"==St(t)},Fe=Object.prototype,Ce=Fe.hasOwnProperty,Pe=Fe.propertyIsEnumerable,Ue=Re(function(){return arguments}())?Re:function(t){return ke(t)&&Ce.call(t,"callee")&&!Pe.call(t,"callee")};var Ie=function(){return!1},Me=d((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,a=n&&n.exports===r?ft.Buffer:void 0,o=(a?a.isBuffer:void 0)||Ie;t.exports=o})),He=/^(?:0|[1-9]\d*)$/;var Le=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&He.test(t))&&t>-1&&t%1==0&&t<e};var Ke=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},Ve={};Ve["[object Float32Array]"]=Ve["[object Float64Array]"]=Ve["[object Int8Array]"]=Ve["[object Int16Array]"]=Ve["[object Int32Array]"]=Ve["[object Uint8Array]"]=Ve["[object Uint8ClampedArray]"]=Ve["[object Uint16Array]"]=Ve["[object Uint32Array]"]=!0,Ve["[object Arguments]"]=Ve["[object Array]"]=Ve["[object ArrayBuffer]"]=Ve["[object Boolean]"]=Ve["[object DataView]"]=Ve["[object Date]"]=Ve["[object Error]"]=Ve["[object Function]"]=Ve["[object Map]"]=Ve["[object Number]"]=Ve["[object Object]"]=Ve["[object RegExp]"]=Ve["[object Set]"]=Ve["[object String]"]=Ve["[object WeakMap]"]=!1;var ze=function(t){return ke(t)&&Ke(t.length)&&!!Ve[St(t)]};var Je=function(t){return function(e){return t(e)}},Be=d((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,a=n&&n.exports===r&&dt.process,o=function(){try{var t=n&&n.require&&n.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=o})),Ge=Be&&Be.isTypedArray,qe=Ge?Je(Ge):ze,$e=Object.prototype.hasOwnProperty;var We=function(t,e){var r=Te(t),n=!r&&Ue(t),a=!r&&!n&&Me(t),o=!r&&!n&&!a&&qe(t),i=r||n||a||o,s=i?Ee(t.length,String):[],u=s.length;for(var c in t)!e&&!$e.call(t,c)||i&&("length"==c||a&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Le(c,u))||s.push(c);return s},Ye=Object.prototype;var Xe=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ye)};var Qe=function(t,e){return function(r){return t(e(r))}},Ze=Qe(Object.keys,Object),tr=Object.prototype.hasOwnProperty;var er=function(t){if(!Xe(t))return Ze(t);var e=[];for(var r in Object(t))tr.call(t,r)&&"constructor"!=r&&e.push(r);return e};var rr=function(t){return null!=t&&Ke(t.length)&&!At(t)};var nr=function(t){return rr(t)?We(t):er(t)};var ar=function(t){return we(t,nr,xe)},or=Object.prototype.hasOwnProperty;var ir=function(t,e,r,n,a,o){var i=1&r,s=ar(t),u=s.length;if(u!=ar(e).length&&!i)return!1;for(var c=u;c--;){var d=s[c];if(!(i?d in e:or.call(e,d)))return!1}var l=o.get(t);if(l&&o.get(e))return l==e;var f=!0;o.set(t,e),o.set(e,t);for(var p=i;++c<u;){var v=t[d=s[c]],h=e[d];if(n)var y=i?n(h,v,d,e,t,o):n(v,h,d,t,e,o);if(!(void 0===y?v===h||a(v,h,r,n,o):y)){f=!1;break}p||(p="constructor"==d)}if(f&&!p){var g=t.constructor,_=e.constructor;g==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof g&&g instanceof g&&"function"==typeof _&&_ instanceof _||(f=!1)}return o.delete(t),o.delete(e),f},sr=Ht(ft,"DataView"),ur=Ht(ft,"Promise"),cr=Ht(ft,"Set"),dr=Ht(ft,"WeakMap"),lr=Et(sr),fr=Et(Lt),pr=Et(ur),vr=Et(cr),hr=Et(dr),yr=St;(sr&&"[object DataView]"!=yr(new sr(new ArrayBuffer(1)))||Lt&&"[object Map]"!=yr(new Lt)||ur&&"[object Promise]"!=yr(ur.resolve())||cr&&"[object Set]"!=yr(new cr)||dr&&"[object WeakMap]"!=yr(new dr))&&(yr=function(t){var e=St(t),r="[object Object]"==e?t.constructor:void 0,n=r?Et(r):"";if(n)switch(n){case lr:return"[object DataView]";case fr:return"[object Map]";case pr:return"[object Promise]";case vr:return"[object Set]";case hr:return"[object WeakMap]"}return e});var gr=yr,_r=Object.prototype.hasOwnProperty;var mr=function(t,e,r,n,a,o){var i=Te(t),s=Te(e),u=i?"[object Array]":gr(t),c=s?"[object Array]":gr(e),d="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u),l="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),f=u==c;if(f&&Me(t)){if(!Me(e))return!1;i=!0,d=!1}if(f&&!d)return o||(o=new ue),i||qe(t)?he(t,e,r,n,a,o):je(t,e,u,r,n,a,o);if(!(1&r)){var p=d&&_r.call(t,"__wrapped__"),v=l&&_r.call(e,"__wrapped__");if(p||v){var h=p?t.value():t,y=v?e.value():e;return o||(o=new ue),a(h,y,r,n,o)}}return!!f&&(o||(o=new ue),ir(t,e,r,n,a,o))};var br=function t(e,r,n,a,o){return e===r||(null==e||null==r||!ke(e)&&!ke(r)?e!=e&&r!=r:mr(e,r,n,a,t,o))};var jr=function(t,e,r,n){var a=r.length,o=a,i=!n;if(null==t)return!o;for(t=Object(t);a--;){var s=r[a];if(i&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++a<o;){var u=(s=r[a])[0],c=t[u],d=s[1];if(i&&s[2]){if(void 0===c&&!(u in t))return!1}else{var l=new ue;if(n)var f=n(c,d,u,t,e,l);if(!(void 0===f?br(d,c,3,n,l):f))return!1}}return!0};var Sr=function(t){return t==t&&!Tt(t)};var Tr=function(t){for(var e=nr(t),r=e.length;r--;){var n=e[r],a=t[n];e[r]=[n,a,Sr(a)]}return e};var wr=function(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}};var Ar=function(t){var e=Tr(t);return 1==e.length&&e[0][2]?wr(e[0][0],e[0][1]):function(r){return r===t||jr(r,t,e)}};var Or=function(t){return"symbol"==typeof t||ke(t)&&"[object Symbol]"==St(t)},Dr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Nr=/^\w*$/;var xr=function(t,e){if(Te(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!Or(t))||(Nr.test(t)||!Dr.test(t)||null!=e&&t in Object(e))};function Er(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,a=e?e.apply(this,n):n[0],o=r.cache;if(o.has(a))return o.get(a);var i=t.apply(this,n);return r.cache=o.set(a,i)||o,i};return r.cache=new(Er.Cache||oe),r}Er.Cache=oe;var kr=Er;var Rr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fr=/\\(\\)?/g,Cr=function(t){var e=kr(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Rr,(function(t,r,n,a){e.push(n?a.replace(Fr,"$1"):r||t)})),e}));var Pr=function(t,e){for(var r=-1,n=null==t?0:t.length,a=Array(n);++r<n;)a[r]=e(t[r],r,t);return a},Ur=pt?pt.prototype:void 0,Ir=Ur?Ur.toString:void 0;var Mr=function t(e){if("string"==typeof e)return e;if(Te(e))return Pr(e,t)+"";if(Or(e))return Ir?Ir.call(e):"";var r=e+"";return"0"==r&&1/e==-1/0?"-0":r};var Hr=function(t){return null==t?"":Mr(t)};var Lr=function(t,e){return Te(t)?t:xr(t,e)?[t]:Cr(Hr(t))};var Kr=function(t){if("string"==typeof t||Or(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e};var Vr=function(t,e){for(var r=0,n=(e=Lr(e,t)).length;null!=t&&r<n;)t=t[Kr(e[r++])];return r&&r==n?t:void 0};var zr=function(t,e,r){var n=null==t?void 0:Vr(t,e);return void 0===n?r:n};var Jr=function(t,e){return null!=t&&e in Object(t)};var Br=function(t,e,r){for(var n=-1,a=(e=Lr(e,t)).length,o=!1;++n<a;){var i=Kr(e[n]);if(!(o=null!=t&&r(t,i)))break;t=t[i]}return o||++n!=a?o:!!(a=null==t?0:t.length)&&Ke(a)&&Le(i,a)&&(Te(t)||Ue(t))};var Gr=function(t,e){return null!=t&&Br(t,e,Jr)};var qr=function(t,e){return xr(t)&&Sr(e)?wr(Kr(t),e):function(r){var n=zr(r,t);return void 0===n&&n===e?Gr(r,t):br(e,n,3)}};var $r=function(t){return t};var Wr=function(t){return function(e){return null==e?void 0:e[t]}};var Yr=function(t){return function(e){return Vr(e,t)}};var Xr=function(t){return xr(t)?Wr(Kr(t)):Yr(t)};var Qr=function(t){return"function"==typeof t?t:null==t?$r:"object"==typeof t?Te(t)?qr(t[0],t[1]):Ar(t):Xr(t)};var Zr=function(t,e,r,n){for(var a=t.length,o=r+(n?1:-1);n?o--:++o<a;)if(e(t[o],o,t))return o;return-1};var tn=function(t){return t!=t};var en=function(t,e,r){for(var n=r-1,a=t.length;++n<a;)if(t[n]===e)return n;return-1};var rn=function(t,e,r){return e==e?en(t,e,r):Zr(t,tn,r)};var nn=function(t,e){return!!(null==t?0:t.length)&&rn(t,e,0)>-1};var an=function(t,e,r){for(var n=-1,a=null==t?0:t.length;++n<a;)if(r(e,t[n]))return!0;return!1};var on=function(){},sn=cr&&1/_e(new cr([,-0]))[1]==1/0?function(t){return new cr(t)}:on;var un=function(t,e,r){var n=-1,a=nn,o=t.length,i=!0,s=[],u=s;if(r)i=!1,a=an;else if(o>=200){var c=e?null:sn(t);if(c)return _e(c);i=!1,a=ve,u=new fe}else u=e?[]:s;t:for(;++n<o;){var d=t[n],l=e?e(d):d;if(d=r||0!==d?d:0,i&&l==l){for(var f=u.length;f--;)if(u[f]===l)continue t;e&&u.push(l),s.push(d)}else a(u,l,r)||(u!==s&&u.push(l),s.push(d))}return s};var cn=function(t,e){return t&&t.length?un(t,Qr(e)):[]},dn=Object.prototype.hasOwnProperty;var ln=function(t){if(null==t)return!0;if(rr(t)&&(Te(t)||"string"==typeof t||"function"==typeof t.splice||Me(t)||qe(t)||Ue(t)))return!t.length;var e=gr(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(Xe(t))return!er(t).length;for(var r in t)if(dn.call(t,r))return!1;return!0};var fn=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t},pn=function(){try{var t=Ht(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();var vn=function(t,e,r){"__proto__"==e&&pn?pn(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r},hn=Object.prototype.hasOwnProperty;var yn=function(t,e,r){var n=t[e];hn.call(t,e)&&X(n,r)&&(void 0!==r||e in t)||vn(t,e,r)};var gn=function(t,e,r,n){var a=!r;r||(r={});for(var o=-1,i=e.length;++o<i;){var s=e[o],u=n?n(r[s],t[s],s,r,t):void 0;void 0===u&&(u=t[s]),a?vn(r,s,u):yn(r,s,u)}return r};var _n=function(t,e){return t&&gn(e,nr(e),t)};var mn=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e},bn=Object.prototype.hasOwnProperty;var jn=function(t){if(!Tt(t))return mn(t);var e=Xe(t),r=[];for(var n in t)("constructor"!=n||!e&&bn.call(t,n))&&r.push(n);return r};var Sn=function(t){return rr(t)?We(t,!0):jn(t)};var Tn=function(t,e){return t&&gn(e,Sn(e),t)},wn=d((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,a=n&&n.exports===r?ft.Buffer:void 0,o=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=o?o(r):new t.constructor(r);return t.copy(n),n}}));var An=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e};var On=function(t,e){return gn(t,xe(t),e)},Dn=Qe(Object.getPrototypeOf,Object),Nn=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Se(e,xe(t)),t=Dn(t);return e}:Oe;var xn=function(t,e){return gn(t,Nn(t),e)};var En=function(t){return we(t,Sn,Nn)},kn=Object.prototype.hasOwnProperty;var Rn=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&kn.call(t,"index")&&(r.index=t.index,r.input=t.input),r};var Fn=function(t){var e=new t.constructor(t.byteLength);return new ye(e).set(new ye(t)),e};var Cn=function(t,e){var r=e?Fn(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)},Pn=/\w*$/;var Un=function(t){var e=new t.constructor(t.source,Pn.exec(t));return e.lastIndex=t.lastIndex,e},In=pt?pt.prototype:void 0,Mn=In?In.valueOf:void 0;var Hn=function(t){return Mn?Object(Mn.call(t)):{}};var Ln=function(t,e){var r=e?Fn(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)};var Kn=function(t,e,r){var n=t.constructor;switch(e){case"[object ArrayBuffer]":return Fn(t);case"[object Boolean]":case"[object Date]":return new n(+t);case"[object DataView]":return Cn(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Ln(t,r);case"[object Map]":return new n;case"[object Number]":case"[object String]":return new n(t);case"[object RegExp]":return Un(t);case"[object Set]":return new n;case"[object Symbol]":return Hn(t)}},Vn=Object.create,zn=function(){function t(){}return function(e){if(!Tt(e))return{};if(Vn)return Vn(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();var Jn=function(t){return"function"!=typeof t.constructor||Xe(t)?{}:zn(Dn(t))};var Bn=function(t){return ke(t)&&"[object Map]"==gr(t)},Gn=Be&&Be.isMap,qn=Gn?Je(Gn):Bn;var $n=function(t){return ke(t)&&"[object Set]"==gr(t)},Wn=Be&&Be.isSet,Yn=Wn?Je(Wn):$n,Xn={};Xn["[object Arguments]"]=Xn["[object Array]"]=Xn["[object ArrayBuffer]"]=Xn["[object DataView]"]=Xn["[object Boolean]"]=Xn["[object Date]"]=Xn["[object Float32Array]"]=Xn["[object Float64Array]"]=Xn["[object Int8Array]"]=Xn["[object Int16Array]"]=Xn["[object Int32Array]"]=Xn["[object Map]"]=Xn["[object Number]"]=Xn["[object Object]"]=Xn["[object RegExp]"]=Xn["[object Set]"]=Xn["[object String]"]=Xn["[object Symbol]"]=Xn["[object Uint8Array]"]=Xn["[object Uint8ClampedArray]"]=Xn["[object Uint16Array]"]=Xn["[object Uint32Array]"]=!0,Xn["[object Error]"]=Xn["[object Function]"]=Xn["[object WeakMap]"]=!1;var Qn=function t(e,r,n,a,o,i){var s,u=1&r,c=2&r,d=4&r;if(n&&(s=o?n(e,a,o,i):n(e)),void 0!==s)return s;if(!Tt(e))return e;var l=Te(e);if(l){if(s=Rn(e),!u)return An(e,s)}else{var f=gr(e),p="[object Function]"==f||"[object GeneratorFunction]"==f;if(Me(e))return wn(e,u);if("[object Object]"==f||"[object Arguments]"==f||p&&!o){if(s=c||p?{}:Jn(e),!u)return c?xn(e,Tn(s,e)):On(e,_n(s,e))}else{if(!Xn[f])return o?e:{};s=Kn(e,f,u)}}i||(i=new ue);var v=i.get(e);if(v)return v;i.set(e,s),Yn(e)?e.forEach((function(a){s.add(t(a,r,n,a,e,i))})):qn(e)&&e.forEach((function(a,o){s.set(o,t(a,r,n,o,e,i))}));var h=d?c?En:ar:c?keysIn:nr,y=l?void 0:h(e);return fn(y||e,(function(a,o){y&&(a=e[o=a]),yn(s,o,t(a,r,n,o,e,i))})),s};var Zn=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0};var ta=function(t,e,r){var n=-1,a=t.length;e<0&&(e=-e>a?0:a+e),(r=r>a?a:r)<0&&(r+=a),a=e>r?0:r-e>>>0,e>>>=0;for(var o=Array(a);++n<a;)o[n]=t[n+e];return o};var ea=function(t,e){return e.length<2?t:Vr(t,ta(e,0,-1))};var ra=function(t,e){return e=Lr(e,t),null==(t=ea(t,e))||delete t[Kr(Zn(e))]},na=Function.prototype,aa=Object.prototype,oa=na.toString,ia=aa.hasOwnProperty,sa=oa.call(Object);var ua=function(t){if(!ke(t)||"[object Object]"!=St(t))return!1;var e=Dn(t);if(null===e)return!0;var r=ia.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&oa.call(r)==sa};var ca=function(t){return ua(t)?void 0:t},da=pt?pt.isConcatSpreadable:void 0;var la=function(t){return Te(t)||Ue(t)||!!(da&&t&&t[da])};var fa=function t(e,r,n,a,o){var i=-1,s=e.length;for(n||(n=la),o||(o=[]);++i<s;){var u=e[i];r>0&&n(u)?r>1?t(u,r-1,n,a,o):Se(o,u):a||(o[o.length]=u)}return o};var pa=function(t){return(null==t?0:t.length)?fa(t,1):[]};var va=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)},ha=Math.max;var ya=function(t,e,r){return e=ha(void 0===e?t.length-1:e,0),function(){for(var n=arguments,a=-1,o=ha(n.length-e,0),i=Array(o);++a<o;)i[a]=n[e+a];a=-1;for(var s=Array(e+1);++a<e;)s[a]=n[a];return s[e]=r(i),va(t,this,s)}};var ga=function(t){return function(){return t}},_a=pn?function(t,e){return pn(t,"toString",{configurable:!0,enumerable:!1,value:ga(e),writable:!0})}:$r,ma=Date.now;var ba=function(t){var e=0,r=0;return function(){var n=ma(),a=16-(n-r);if(r=n,a>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(_a);var ja=function(t){return ba(ya(t,void 0,pa),t+"")}((function(t,e){var r={};if(null==t)return r;var n=!1;e=Pr(e,(function(e){return e=Lr(e,t),n||(n=e.length>1),e})),gn(t,En(t),r),n&&(r=Qn(r,7,ca));for(var a=e.length;a--;)ra(r,e[a]);return r}));var Sa=function(t,e,r,n){if(!Tt(t))return t;for(var a=-1,o=(e=Lr(e,t)).length,i=o-1,s=t;null!=s&&++a<o;){var u=Kr(e[a]),c=r;if(a!=i){var d=s[u];void 0===(c=n?n(d,u,s):void 0)&&(c=Tt(d)?d:Le(e[a+1])?[]:{})}yn(s,u,c),s=s[u]}return t};var Ta=function(t,e,r){for(var n=-1,a=e.length,o={};++n<a;){var i=e[n],s=Vr(t,i);r(s,i)&&Sa(o,Lr(i,t),s)}return o};var wa=function(t,e){if(null==t)return{};var r=Pr(En(t),(function(t){return[t]}));return e=Qr(e),Ta(t,r,(function(t,r){return e(t,r[0])}))};var Aa=function(t){return function(e,r,n){for(var a=-1,o=Object(e),i=n(e),s=i.length;s--;){var u=i[t?s:++a];if(!1===r(o[u],u,o))break}return e}}();var Oa=function(t,e){return t&&Aa(t,e,nr)};var Da,Na=function(t,e){var r={};return e=Qr(e),Oa(t,(function(t,n,a){vn(r,n,e(t,n,a))})),r},xa=new(function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).handleResetFromData=function(t){return i({},t,{lastSyncedAt:1})},e.handleResetFromStore=function(){return e.getInitialState()},e.handleTogglePushChanges=function(t,r){return i({},t,{},e.getInitialState(),{pushChanges:"boolean"==typeof r.payload?r.payload:!t.pushChanges})},e.handleUpdateLastSyncTime=function(t,e){return t.lastSyncedAt===e.payload?t:i({},t,{lastSyncedAt:e.payload})},e.handleClearDatabase=function(t){return i({},t,{lastSyncedAt:1})},e.handleToggleShowDialogHelp=function(t,e){return i({},t,{showDialogHelp:Boolean(e.payload)})},e.handleToggleSyncTagsAndNotes=function(t,e){return i({},t,{syncTagsAndNotes:Boolean(e.payload)})},e}s(e,t);var r=e.prototype;return r.getInitialState=function(){var t=i({},L.store(this.key));return void 0===t.showDialogHelp&&(t.showDialogHelp=!0),void 0===t.pushChanges&&(t.pushChanges=!0),void 0===t.lastSyncedAt&&(t.lastSyncedAt=1),void 0===t.syncTagsAndNotes&&(t.syncTagsAndNotes=!0),t},r.canSyncTagsAndNotes=function(){return this.getState().syncTagsAndNotes},r.canShowDialogHelp=function(){return this.getState().showDialogHelp},r.canPushChanges=function(){return this.getState().pushChanges},r.getLastSyncedAt=function(){return this.getState().lastSyncedAt||1},r.reduce=function(t,e){return e.type&&"function"==typeof this.actions[e.type]?this.actions[e.type](t,e):t},n(e,[{key:"key",get:function(){return"app"}},{key:"actions",get:function(){var t;return(t={}).clear_database=this.handleClearDatabase,t.reset_from_data=this.handleResetFromData,t.reset_from_store=this.handleResetFromStore,t.toggle_push_changes=this.handleTogglePushChanges,t.toggle_show_dialog_help=this.handleToggleShowDialogHelp,t.toggle_sync_tags_and_notes=this.handleToggleSyncTagsAndNotes,t.update_last_sync_time=this.handleUpdateLastSyncTime,t}}]),e}(W))(v),Ea={items:{}},ka=new(function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).handleResetFromData=function(t,r){e.getDispatcher().waitFor([xa.getDispatchToken()]);var n=r.payload;return n.userTags?{items:n.userTags.items.reduce((function(t,r){return t[e.createKey(r.tagName)]={tagName:r.tagName,tagUserNote:r.tagUserNote,dirty:1},t}),{})}:Ea},e.handleClearDatabase=function(){return e.getDispatcher().waitFor([xa.getDispatchToken()]),Ea},e.handleResetFromStore=function(){return e.getDispatcher().waitFor([xa.getDispatchToken()]),e.getInitialState()},e.handleAddAddressTag=function(t,r){var n,a,o=r.payload.tag,s=e.createKey(o),u=null==t||null===(n=t.items)||void 0===n?void 0:n[s];return u=u&&!u.removed?u:void 0,i({},t,{items:i({},null==t?void 0:t.items,(a={},a[s]={tagName:o,tagUserNote:void 0,dirty:u?u.dirty||2:1,removed:!1},a))})},e.handleReplaceAddressTagsAndNote=function(t,r){var n;if(!(null==r||null===(n=r.payload)||void 0===n?void 0:n.tags))return t;var a=r.payload.tags.reduce((function(r,n){var a,o=e.createKey(n),i=null==t||null===(a=t.items)||void 0===a?void 0:a[o];return i=i&&!i.removed?i:void 0,r[o]={tagName:n,tagUserNote:void 0,dirty:i?i.dirty||2:1,removed:!1},r}),{});return i({},t,{items:i({},null==t?void 0:t.items,{},a)})},e.handleSyncChanges=function(t,r){var n,a,o,s,u,c;if(!(null==r||null===(n=r.payload)||void 0===n?void 0:n.userTag))return t;var d=r.payload.userTag,l=d.created,f=d.updated,p=d.deleted,v=d.update,h=d.insert,y=d.remove;if(!ln(p)||!ln(y)){var g=(p||y).map((function(t){return e.createKey(t.tagName)}));t=i({},t,{items:ja(t.items,g)})}return t=i({},t,{items:i({},null===(a=t)||void 0===a?void 0:a.items,{},null===(o=l||h)||void 0===o||null===(s=o.reduce)||void 0===s?void 0:s.call(o,(function(t,r){var n;return Object.assign(t,((n={})[e.createKey(r.tagName)]=r,n))}),{}),{},null===(u=f||v)||void 0===u||null===(c=u.reduce)||void 0===c?void 0:c.call(u,(function(t,r){var n;return Object.assign(t,((n={})[e.createKey(r.tagName)]=r,n))}),{}))})},e.handleMarkAllAsDirty=function(t){var e={};for(var r in t.items){var n,a;e[r]=i({},t.items[r],{dirty:null!==(n=null===(a=t.items[r])||void 0===a?void 0:a.dirty)&&void 0!==n?n:1})}return i({},t,{items:e})},e.handleUpdateDirtyStatus=function(t,e){var r,n,a,o,s=null!==(r=null==e||null===(n=e.payload)||void 0===n?void 0:n.tags)&&void 0!==r?r:[],u=null==e||null===(a=e.payload)||void 0===a?void 0:a.from,c=null==e||null===(o=e.payload)||void 0===o?void 0:o.to;if(ln(s)||!u||!c)return t;var d={};for(var l in t.items){var f;(null===(f=t.items[l])||void 0===f?void 0:f.dirty)===u&&-1!==s.indexOf(l)?d[l]=i({},t.items[l],{dirty:c}):d[l]=t.items[l]}return i({},t,{items:d})},e}s(e,t);var r=e.prototype;return r.createKey=function(t){return String(t).toLowerCase()},r.getInitialState=function(){return L.store(this.key)||Ea},r.getStoreState=function(){return{items:this.getState().items}},r.getExportJSON=function(){var t=this.getState();return{userTags:{items:Object.values(t.items).filter((function(t){return!t.removed})).map((function(t){return{tagName:t.tagName,tagUserNote:t.tagUserNote}}))}}},r.getTags=function(){var t=this.getState();return Object.values(t.items).map((function(t){return t.tagName})).sort()},r.getTag=function(t){var e=this;t=this.createKey(t);var r=this.getState();return Object.values(r.items).find((function(r){return e.createKey(r.tagName)===t}))},r.getChanges=function(){var t=this.getState(),e=Object.values(Na(wa(t.items,(function(t){return t.removed})),(function(t){return{tagName:t.tagName}}))),r=Object.values(Na(wa(t.items,(function(t){return 1===t.dirty&&!t.removed})),(function(t){return{tagName:t.tagName,tagUserNote:t.tagUserNote}}))),n=Object.values(Na(wa(t.items,(function(t){return 2===t.dirty&&!t.removed})),(function(t){return{tagName:t.tagName,tagUserNote:t.tagUserNote}})));if(!(ln(e)&&ln(r)&&ln(n)))return{userTag:{update:n,insert:r,remove:e}}},r.reduce=function(t,e){return e.type&&"function"==typeof this.actions[e.type]?this.actions[e.type](t,e):t},n(e,[{key:"key",get:function(){return"userTags"}},{key:"actions",get:function(){var t;return(t={}).address_tag_add=this.handleAddAddressTag,t.clear_database=this.handleClearDatabase,t.mark_all_as_dirty=this.handleMarkAllAsDirty,t.address_tags_and_note_replace=this.handleReplaceAddressTagsAndNote,t.reset_from_data=this.handleResetFromData,t.reset_from_store=this.handleResetFromStore,t.sync_changes=this.handleSyncChanges,t.update_dirty_status=this.handleUpdateDirtyStatus,t}}]),e}(W))(v),Ra={items:{},tmpRemoved:{}},Fa=new(function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).handleResetFromData=function(t,r){e.getDispatcher().waitFor([xa.getDispatchToken()]);var n=r.payload;if(n.userAddresses){var a=Date.now();return{tmpRemoved:{},items:n.userAddresses.items.reduce((function(t,r){return t[e.createKey(r.address)]={address:r.address,addressTags:r.addressTags,addressUserNote:r.addressUserNote,createdTime:r.createdTime||a,updatedTime:r.updatedTime||a,dirty:1},t}),{})}}return Ra},e.handleClearDatabase=function(){return e.getDispatcher().waitFor([xa.getDispatchToken()]),Ra},e.handleResetFromStore=function(){return e.getDispatcher().waitFor([xa.getDispatchToken()]),e.getInitialState()},e.handleRemoveAddressTag=function(t,r){var n,a,o,s,u=Date.now(),c=r.payload,d=ka.createKey(c.tag),l=e.createKey(c.address),f=null==t||null===(n=t.items)||void 0===n?void 0:n[l],p=null!==(a=null===(o=f=f&&!f.removed?f:void 0)||void 0===o?void 0:o.addressTags)&&void 0!==a?a:[];if(p=p.filter((function(t){return ka.createKey(t)!==d})),f&&ln(p)&&ln(f.addressUserNote)){var v,h,y,g=i({createdTime:u},f,{address:c.address,addressTags:p,removed:!0,updatedTime:u});return i({},t,{tmpRemoved:i({},null==t?void 0:t.tmpRemoved,(v={},v[l]=g,v)),items:1===(null===(h=f)||void 0===h?void 0:h.dirty)?ja(t.items,[l]):i({},null==t?void 0:t.items,(y={},y[l]=g,y))})}var _=i({createdTime:u},f,{address:c.address,addressTags:p,dirty:f?f.dirty||2:1,removed:!1,updatedTime:u});return i({},t,{tmpRemoved:ja(null==t?void 0:t.tmpRemoved,[l]),items:i({},null==t?void 0:t.items,(s={},s[l]=_,s))})},e.handleAddAddressTag=function(t,r){var n,a,o,s;e.getDispatcher().waitFor([ka.getDispatchToken()]);var u=r.payload,c=(ka.createKey(u.tag),e.createKey(u.address)),d=null==t||null===(n=t.items)||void 0===n?void 0:n[c],l=null!==(a=null===(o=d=d&&!d.removed?d:void 0)||void 0===o?void 0:o.addressTags)&&void 0!==a?a:[],f=Date.now();return i({},t,{tmpRemoved:ja(null==t?void 0:t.tmpRemoved,[c]),items:i({},null==t?void 0:t.items,(s={},s[c]=i({createdTime:f},d,{address:u.address,addressTags:l.concat(u.tag),dirty:d?d.dirty||2:1,removed:!1,updatedTime:f}),s))})},e.handleReplaceAddressTagsAndNote=function(t,r){var n,a;e.getDispatcher().waitFor([ka.getDispatchToken()]);var o=r.payload,s=e.createKey(o.address),u=null==t||null===(n=t.items)||void 0===n?void 0:n[s];u=u&&!u.removed?u:void 0;var c=cn(o.tags,(function(t){return ka.createKey(t)})),d=Date.now();if(ln(c)&&ln(o.note)){var l,f,p;if(!u)return t;var v=i({createdTime:d},u,{addressTags:c,addressUserNote:o.note,address:o.address,removed:!0,updatedTime:d});return i({},t,{tmpRemoved:i({},null==t?void 0:t.tmpRemoved,(l={},l[s]=v,l)),items:1===(null===(f=u)||void 0===f?void 0:f.dirty)?ja(t.items,[s]):i({},null==t?void 0:t.items,(p={},p[s]=v,p))})}var h=i({createdTime:d},u,{addressTags:c,addressUserNote:o.note,address:o.address,dirty:u?u.dirty||2:1,removed:!1,updatedTime:d});return i({},t,{tmpRemoved:ja(null==t?void 0:t.tmpRemoved,[s]),items:i({},null==t?void 0:t.items,(a={},a[s]=h,a))})},e.handleRemoveAddress=function(t,r){var n,a,o,s=e.createKey(r.payload),u=null==t||null===(n=t.items)||void 0===n?void 0:n[s],c=i({},u,{removed:!0});return i({},t,{tmpRemoved:i({},null==t?void 0:t.tmpRemoved,(a={},a[s]=c,a)),items:1===(null==u?void 0:u.dirty)?ja(t.items,[s]):i({},null==t?void 0:t.items,(o={},o[s]=c,o))})},e.handleSyncChanges=function(t,r){var n,a,o,s,u,c,d,l,f,p,v,h;if(e.getDispatcher().waitFor([ka.getDispatchToken()]),!(null==r||null===(n=r.payload)||void 0===n?void 0:n.userAddress))return t;var y=r.payload.userAddress,g=y.created,_=y.updated,m=y.deleted,b=y.update,j=y.insert,S=y.remove;if(!ln(m)||!ln(S)){var T=(m||S).map((function(t){var r;return e.createKey(null!==(r=null==t?void 0:t.address)&&void 0!==r?r:t)}));t=i({},t,{items:ja(t.items,T)})}var w=[].concat(null!==(a=null===(o=g||j)||void 0===o||null===(s=o.map)||void 0===s?void 0:s.call(o,(function(t){return e.createKey(t.address)})))&&void 0!==a?a:[],null!==(u=null===(c=_||b)||void 0===c||null===(d=c.map)||void 0===d?void 0:d.call(c,(function(t){return e.createKey(t.address)})))&&void 0!==u?u:[]);return t=i({},t,{tmpRemoved:ja(t.tmpRemoved,w),items:i({},null===(l=t)||void 0===l?void 0:l.items,{},null===(f=g||j)||void 0===f||null===(p=f.reduce)||void 0===p?void 0:p.call(f,(function(t,r){var n;return Object.assign(t,((n={})[e.createKey(r.address)]=r,n))}),{}),{},null===(v=_||b)||void 0===v||null===(h=v.reduce)||void 0===h?void 0:h.call(v,(function(t,r){var n;return Object.assign(t,((n={})[e.createKey(r.address)]=r,n))}),{}))})},e.handleMarkAllAsDirty=function(t){var e={};for(var r in t.items){var n,a;e[r]=i({},t.items[r],{dirty:null!==(n=null===(a=t.items[r])||void 0===a?void 0:a.dirty)&&void 0!==n?n:1})}return i({},t,{items:e})},e.handleUpdateDirtyStatus=function(t,e){var r,n,a,o,s=null!==(r=null==e||null===(n=e.payload)||void 0===n?void 0:n.addresses)&&void 0!==r?r:[],u=null==e||null===(a=e.payload)||void 0===a?void 0:a.from,c=null==e||null===(o=e.payload)||void 0===o?void 0:o.to;if(ln(s)||!u||!c)return t;var d={};for(var l in t.items){var f;(null===(f=t.items[l])||void 0===f?void 0:f.dirty)===u&&-1!==s.indexOf(l)?d[l]=i({},t.items[l],{dirty:c}):d[l]=t.items[l]}return i({},t,{items:d})},e}s(e,t);var r=e.prototype;return r.createKey=function(t){return String(t).toLowerCase()},r.getInitialState=function(){return L.store(this.key)||Ra},r.getStoreState=function(){return{items:this.getState().items}},r.getExportJSON=function(){var t=this.getState();return{userAddresses:{items:Object.values(t.items).filter((function(t){return!t.removed})).map((function(t){return{address:t.address,addressTags:t.addressTags,addressUserNote:t.addressUserNote,createdTime:t.createdTime,updatedTime:t.updatedTime}}))}}},r.getItems=function(){var t,e,r=this.getState();return[].concat(Object.values(null!==(t=null==r?void 0:r.items)&&void 0!==t?t:{}).filter((function(t){return!t.removed})),Object.values(null!==(e=null==r?void 0:r.tmpRemoved)&&void 0!==e?e:{}))},r.getAddressNote=function(t){var e,r=this.getState(),n=null==r||null===(e=r.items)||void 0===e?void 0:e[this.createKey(t)];return n&&!n.removed&&n.addressUserNote||""},r.getAddressTags=function(t){var e,r=this.getState(),n=null==r||null===(e=r.items)||void 0===e?void 0:e[this.createKey(t)];return n&&!n.removed&&n.addressTags||[]},r.getAllAddressTagsCount=function(){var t=this.getState(),e=0;for(var r in t.items){var n,a=null===(n=t.items)||void 0===n?void 0:n[r];a&&!a.removed&&(e+=1)}return e},r.getChanges=function(){var t=this.getState(),e=Object.values(Na(wa(t.items,(function(t){return t.removed})),(function(t,e){return{address:e}}))),r=Object.values(Na(wa(t.items,(function(t){return 1===t.dirty&&!t.removed})),(function(t){return{address:t.address,addressTags:t.addressTags,addressUserNote:t.addressUserNote,createdTime:t.createdTime,updatedTime:t.updatedTime}}))),n=Object.values(Na(wa(t.items,(function(t){return 2===t.dirty&&!t.removed})),(function(t){return{address:t.address,addressTags:t.addressTags,addressUserNote:t.addressUserNote,createdTime:t.createdTime,updatedTime:t.updatedTime}})));if(!(ln(e)&&ln(r)&&ln(n)))return{userAddress:{update:n,insert:r,remove:e}}},r.reduce=function(t,e){return e.type&&"function"==typeof this.actions[e.type]?this.actions[e.type](t,e):t},n(e,[{key:"key",get:function(){return"userAddresses"}},{key:"actions",get:function(){var t;return(t={}).address_tag_add=this.handleAddAddressTag,t.clear_database=this.handleClearDatabase,t.mark_all_as_dirty=this.handleMarkAllAsDirty,t.address_tag_remove=this.handleRemoveAddressTag,t.address_remove=this.handleRemoveAddress,t.address_tags_and_note_replace=this.handleReplaceAddressTagsAndNote,t.reset_from_data=this.handleResetFromData,t.reset_from_store=this.handleResetFromStore,t.sync_changes=this.handleSyncChanges,t.update_dirty_status=this.handleUpdateDirtyStatus,t}}]),e}(W))(v),Ca=Date.now(),Pa={},Ua=new(function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).handleResetFromData=function(t,r){e.getDispatcher().waitFor([xa.getDispatchToken()]);var n=r.payload;return n.userInfo?{userName:n.userInfo.userName}:Pa},e.handleClearDatabase=function(t){return e.getDispatcher().waitFor([xa.getDispatchToken()]),i({},t)},e.handleResetFromStore=function(){return e.getDispatcher().waitFor([xa.getDispatchToken()]),e.getInitialState()},e.handleUpdateUsername=function(t,e){return i({},t,{userName:e.payload})},e}s(e,t);var r=e.prototype;return r.getInitialState=function(){var t=L.store(this.key)||Pa;return t.dateCreated||(t.dateCreated=Date.now()),Ca>t.lastLogin&&(t.lastLogin=Ca),t},r.getExportJSON=function(){return{userInfo:{userName:this.getState().userName}}},r.reduce=function(t,e){return e.type&&"function"==typeof this.actions[e.type]?this.actions[e.type](t,e):t},n(e,[{key:"key",get:function(){return"userInfo"}},{key:"actions",get:function(){var t;return(t={}).reset_from_store=this.handleResetFromStore,t.userinfo_username_update=this.handleUpdateUsername,t.clear_database=this.handleClearDatabase,t.reset_from_data=this.handleResetFromData,t}}]),e}(W))(v),Ia={items:{},tmpRemoved:{}},Ma=new(function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).handleResetFromData=function(t,r){e.getDispatcher().waitFor([xa.getDispatchToken()]);var n=r.payload;if(n.userTxs){var a=Date.now();return{tmpRemoved:{},items:n.userTxs.items.reduce((function(t,r){return t[e.createKey(r.txHash)]={txHash:r.txHash,txUserNote:r.txUserNote,createdTime:r.createdTime||a,updatedTime:r.updatedTime||a,dirty:1},t}),{})}}return Ia},e.handleClearDatabase=function(){return e.getDispatcher().waitFor([xa.getDispatchToken()]),Ia},e.handleResetFromStore=function(){return e.getDispatcher().waitFor([xa.getDispatchToken()]),e.getInitialState()},e.handleMarkAllAsDirty=function(t){var e={};for(var r in t.items){var n,a;e[r]=i({},t.items[r],{dirty:null!==(n=null===(a=t.items[r])||void 0===a?void 0:a.dirty)&&void 0!==n?n:1})}return i({},t,{items:e})},e.handleSyncChanges=function(t,r){var n,a,o,s,u,c,d,l,f,p,v,h;if(ln(null==r||null===(n=r.payload)||void 0===n?void 0:n.userTx))return t;var y=r.payload.userTx,g=y.created,_=y.updated,m=y.deleted,b=y.update,j=y.insert,S=y.remove;if(!ln(m)||!ln(S)){var T=(m||S).map((function(t){var r;return e.createKey(null!==(r=null==t?void 0:t.txHash)&&void 0!==r?r:t)}));t=i({},t,{items:ja(t.items,T)})}if(ln(g)&&ln(j)&&ln(_)&&ln(b))return t;var w=[].concat(null!==(a=null===(o=g||j)||void 0===o||null===(s=o.map)||void 0===s?void 0:s.call(o,(function(t){return e.createKey(t.txHash)})))&&void 0!==a?a:[],null!==(u=null===(c=_||b)||void 0===c||null===(d=c.map)||void 0===d?void 0:d.call(c,(function(t){return e.createKey(t.txHash)})))&&void 0!==u?u:[]);return t=i({},t,{tmpRemoved:ja(t.tmpRemoved,w),items:i({},null===(l=t)||void 0===l?void 0:l.items,{},null===(f=g||j)||void 0===f||null===(p=f.reduce)||void 0===p?void 0:p.call(f,(function(t,r){var n;return Object.assign(t,((n={})[e.createKey(r.txHash)]=r,n))}),{}),{},null===(v=_||b)||void 0===v||null===(h=v.reduce)||void 0===h?void 0:h.call(v,(function(t,r){var n;return Object.assign(t,((n={})[e.createKey(r.txHash)]=r,n))}),{}))})},e.handleReplaceTxNote=function(t,r){var n,a,o=Date.now(),s=r.payload,u=e.createKey(s.txHash),c=null==t||null===(n=t.items)||void 0===n?void 0:n[u];if(c=c&&!c.removed?c:void 0,!s.note){var d,l,f;if(!c)return t;var p=i({createdTime:o},c,{txHash:s.txHash,txUserNote:s.note,removed:!0,updatedTime:o});return i({},t,{tmpRemoved:i({},null==t?void 0:t.tmpRemoved,(d={},d[u]=p,d)),items:1===(null===(l=c)||void 0===l?void 0:l.dirty)?ja(t.items,[u]):i({},null==t?void 0:t.items,(f={},f[u]=p,f))})}var v=i({createdTime:o},c,{txHash:s.txHash,txUserNote:s.note,dirty:c?c.dirty||2:1,removed:!1,updatedTime:o});return i({},t,{tmpRemoved:ja(null==t?void 0:t.tmpRemoved,[u]),items:i({},null==t?void 0:t.items,(a={},a[u]=v,a))})},e.handleRemoveTx=function(t,r){var n,a,o,s=e.createKey(r.payload),u=null==t||null===(n=t.items)||void 0===n?void 0:n[s],c=i({},u,{removed:!0});return i({},t,{tmpRemoved:i({},null==t?void 0:t.tmpRemoved,(a={},a[s]=c,a)),items:1===(null==u?void 0:u.dirty)?ja(t.items,[s]):i({},null==t?void 0:t.items,(o={},o[s]=c,o))})},e.handleUpdateDirtyStatus=function(t,e){var r,n,a,o,s=null!==(r=null==e||null===(n=e.payload)||void 0===n?void 0:n.txs)&&void 0!==r?r:[],u=null==e||null===(a=e.payload)||void 0===a?void 0:a.from,c=null==e||null===(o=e.payload)||void 0===o?void 0:o.to;if(ln(s)||!u||!c)return t;var d={};for(var l in t.items){var f;(null===(f=t.items[l])||void 0===f?void 0:f.dirty)===u&&-1!==s.indexOf(l)?d[l]=i({},t.items[l],{dirty:c}):d[l]=t.items[l]}return i({},t,{items:d})},e}s(e,t);var r=e.prototype;return r.createKey=function(t){return String(t).toLowerCase()},r.getInitialState=function(){return L.store(this.key)||Ia},r.getStoreState=function(){return{items:this.getState().items}},r.getExportJSON=function(){var t=this.getState();return{userTxs:{items:Object.values(t.items).filter((function(t){return!t.removed})).map((function(t){return{txHash:t.txHash,txUserNote:t.txUserNote,createdTime:t.createdTime,updatedTime:t.updatedTime}}))}}},r.getItems=function(){var t,e,r=this.getState();return[].concat(Object.values(null!==(t=null==r?void 0:r.items)&&void 0!==t?t:{}).filter((function(t){return!t.removed})),Object.values(null!==(e=null==r?void 0:r.tmpRemoved)&&void 0!==e?e:{}))},r.getTxNote=function(t){var e,r=this.getState(),n=null==r||null===(e=r.items)||void 0===e?void 0:e[this.createKey(t)];return n&&!n.removed&&n.txUserNote||""},r.getAllTxsCount=function(){var t=this.getState(),e=0;for(var r in t.items){var n=t.items[r];n&&!n.removed&&(e+=1)}return e},r.getChanges=function(){var t=this.getState(),e=Object.values(Na(wa(t.items,(function(t){return t.removed})),(function(t,e){return{txHash:e}}))),r=Object.values(Na(wa(t.items,(function(t){return 1===t.dirty&&!t.removed})),(function(t){return{txHash:t.txHash,txUserNote:t.txUserNote,createdTime:t.createdTime,updatedTime:t.updatedTime}}))),n=Object.values(Na(wa(t.items,(function(t){return 2===t.dirty&&!t.removed})),(function(t){return{txHash:t.txHash,txUserNote:t.txUserNote,createdTime:t.createdTime,updatedTime:t.updatedTime}})));if(!(ln(e)&&ln(r)&&ln(n)))return{userTx:{update:n,insert:r,remove:e}}},r.reduce=function(t,e){return e.type&&"function"==typeof this.actions[e.type]?this.actions[e.type](t,e):t},n(e,[{key:"key",get:function(){return"userTxs"}},{key:"actions",get:function(){var t;return(t={}).clear_database=this.handleClearDatabase,t.mark_all_as_dirty=this.handleMarkAllAsDirty,t.remove_tx=this.handleRemoveTx,t.replace_tx_note=this.handleReplaceTxNote,t.reset_from_data=this.handleResetFromData,t.reset_from_store=this.handleResetFromStore,t.sync_changes=this.handleSyncChanges,t.update_dirty_status=this.handleUpdateDirtyStatus,t}}]),e}(W))(v);function Ha(t){t.addListener((function(){L.store(t.key,t.getState())}))}new(function(t){function e(){return t.apply(this,arguments)||this}s(e,t);var r=e.prototype;return r.getInitialState=function(){return null},r.reduce=function(t,e){return t},e}(W))(v),Ha(xa),Ha(Ua),Ha(Fa),Ha(ka),Ha(Ma),exports.actions=C,exports.appStore=xa,exports.dispatcher=v,exports.exportStoreToJSON=function(){return i({},ka.getExportJSON(),{},Fa.getExportJSON(),{},Ua.getExportJSON(),{},Ma.getExportJSON())},exports.importStoreFromJSON=function(t){L.reset(),D(t)},exports.initDatabase=function(t){var e,r,n;L.switch(t),A(),null===(e=Da)||void 0===e||e.cancel(),r=0,n=function(t){t&&"ethpuuid"===t.key&&t.newValue&&JSON.parse(t.newValue)!==JSON.parse(t.oldValue)&&L.reset(JSON.parse(t.newValue)),clearTimeout(r),r=setTimeout((function(){var t,e;(xa.getLastSyncedAt()<(null!==(t=null===(e=L.store("app"))||void 0===e?void 0:e.lastSyncedAt)&&void 0!==t?t:1)||"visible"!==document.visibilityState)&&A()}),100)},window.addEventListener("storage",n,!1),Da={cancel:function(){clearTimeout(r),window.removeEventListener("storage",n,!1)}}},exports.localStore=L,exports.registerStore=Ha,exports.userAddressesStore=Fa,exports.userInfoStore=Ua,exports.userTagsStore=ka,exports.userTxsStore=Ma;
//# sourceMappingURL=index.js.map
