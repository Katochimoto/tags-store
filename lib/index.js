"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,e=(t=require("util"))&&"object"==typeof t&&"default"in t?t.default:t;function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function c(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function d(t,e){return t(e={exports:{}},e.exports),e.exports}var l=function(t){};"production"!==process.env.NODE_ENV&&(l=function(t){if(void 0===t)throw new Error("invariant requires an error message argument")});var f=function(t,e,r,n,a,i,o,s){if(l(e),!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,a,i,o,s],d=0;(u=new Error(e.replace(/%s/g,(function(){return c[d++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}},p=d((function(t,e){e.__esModule=!0;var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}return t.prototype.register=function(t){var e="ID_"+this._lastID++;return this._callbacks[e]=t,e},t.prototype.unregister=function(t){this._callbacks[t]||("production"!==process.env.NODE_ENV?f(!1,"Dispatcher.unregister(...): `%s` does not map to a registered callback.",t):f(!1)),delete this._callbacks[t]},t.prototype.waitFor=function(t){this._isDispatching||("production"!==process.env.NODE_ENV?f(!1,"Dispatcher.waitFor(...): Must be invoked while dispatching."):f(!1));for(var e=0;e<t.length;e++){var r=t[e];this._isPending[r]?this._isHandled[r]||("production"!==process.env.NODE_ENV?f(!1,"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",r):f(!1)):(this._callbacks[r]||("production"!==process.env.NODE_ENV?f(!1,"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",r):f(!1)),this._invokeCallback(r))}},t.prototype.dispatch=function(t){this._isDispatching&&("production"!==process.env.NODE_ENV?f(!1,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."):f(!1)),this._startDispatching(t);try{for(var e in this._callbacks)this._isPending[e]||this._invokeCallback(e)}finally{this._stopDispatching()}},t.prototype.isDispatching=function(){return this._isDispatching},t.prototype._invokeCallback=function(t){this._isPending[t]=!0,this._callbacks[t](this._pendingPayload),this._isHandled[t]=!0},t.prototype._startDispatching=function(t){for(var e in this._callbacks)this._isPending[e]=!1,this._isHandled[e]=!1;this._pendingPayload=t,this._isDispatching=!0},t.prototype._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},t}();t.exports=r}));c(p);var h=new p,v=function(t,e){return{type:"replace_tx_note",payload:{txHash:t,note:e}}},y=function(t){return{type:"remove_tx",payload:t}},_=function(t,e){return{type:"address_tags_and_note_replace",payload:{address:t,tags:e.tags,note:e.note}}},g=function(t,e){return{type:"address_tag_add",payload:{address:t,tag:e}}},m=function(t,e){return{type:"address_tag_remove",payload:{address:t,tag:e}}},b=function(t){return{type:"address_remove",payload:t}},T=function(t){return{type:"userinfo_username_update",payload:t}},S=function(t){return{type:"toggle_push_changes",payload:t}},O=function(t){return{type:"sync_changes",payload:t}},w=function(){return{type:"reset_from_store"}},j=function(){h.dispatch(S(!1)),h.dispatch({type:"reset_from_store"}),h.dispatch(S(!0))},A=function(t){return{type:"reset_from_data",payload:t}},D=function(t){h.dispatch(S(!1)),h.dispatch(A(t)),h.dispatch(S(!0))},N=function(t){return{type:"update_last_sync_time",payload:t}},x=function(){return{type:"clear_database"}},E=function(){return{type:"mark_all_as_dirty"}},k=function(t){return{type:"toggle_show_dialog_help",payload:t}},R=function(t,e,r){return{type:"update_dirty_status",payload:o({},r,{from:t,to:e})}},C=function(t){return{type:"toggle_sync_tags_and_notes",payload:t}},F=Object.freeze({__proto__:null,ADD_ADDRESS_TAG:"address_tag_add",CLEAR_DATABASE:"clear_database",MARK_ALL_AS_DIRTY:"mark_all_as_dirty",REMOVE_ADDRESS:"address_remove",REMOVE_ADDRESS_TAG:"address_tag_remove",REMOVE_TX:"remove_tx",REPLACE_ADDRESS_TAGS_AND_NOTE:"address_tags_and_note_replace",REPLACE_TX_NOTE:"replace_tx_note",RESET_FROM_DATA:"reset_from_data",RESET_FROM_STORE:"reset_from_store",SYNC_CHANGES:"sync_changes",TOGGLE_PUSH_CHANGES:"toggle_push_changes",TOGGLE_SHOW_DIALOG_HELP:"toggle_show_dialog_help",TOGGLE_SYNC_TAGS_AND_NOTES:"toggle_sync_tags_and_notes",UPDATE_DIRTY_STATUS:"update_dirty_status",UPDATE_LAST_SYNC_TIME:"update_last_sync_time",UPDATE_USERNAME:"userinfo_username_update",replaceTxNote:v,boundReplaceTxNote:function(t,e){return h.dispatch(v(t,e))},removeTx:y,boundRemoveTx:function(t){return h.dispatch(y(t))},replaceAddressTagsAndNote:_,boundReplaceAddressTagsAndNote:function(t,e){return h.dispatch(_(t,e))},addAddressTag:g,boundAddAddressTag:function(t,e){return h.dispatch(g(t,e))},removeAddressTag:m,boundRemoveAddressTag:function(t,e){return h.dispatch(m(t,e))},removeAddress:b,boundRemoveAddress:function(t){return h.dispatch(b(t))},updateUserName:T,boundUpdateUserName:function(t){return h.dispatch(T(t))},togglePushChanges:S,syncChanges:O,boundSyncChanges:function(t){h.dispatch(S(!1)),h.dispatch(O(t)),h.dispatch(S(!0))},resetFromStore:w,boundResetFromStore:j,resetFromData:A,boundResetFromData:D,updateLastSyncTime:N,boundUpdateLastSyncTime:function(t){return h.dispatch(N(t))},clearDatabase:x,boundClearDatabase:function(){h.dispatch(S(!1)),h.dispatch({type:"clear_database"}),h.dispatch(S(!0))},markAllAsDirty:E,boundMarkAllAsDirty:function(){h.dispatch(S(!1)),h.dispatch({type:"mark_all_as_dirty"}),h.dispatch(S(!0))},toggleShowDialogHelp:k,boundToggleShowDialogHelp:function(t){return h.dispatch(k(t))},updateDirtyStatus:R,boundUpdateDirtyStatus:function(t,e,r){return h.dispatch(R(t,e,r))},toggleSyncTagsAndNotes:C,boundToggleSyncTagsAndNotes:function(t){return h.dispatch(C(t))}}),P=d((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){if(!r)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(n)};var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),n=new Uint8Array(16);t.exports=e.default}));c(P);var U=d((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);var a=function(t,e){var n=e||0,a=r;return[a[t[n++]],a[t[n++]],a[t[n++]],a[t[n++]],"-",a[t[n++]],a[t[n++]],"-",a[t[n++]],a[t[n++]],"-",a[t[n++]],a[t[n++]],"-",a[t[n++]],a[t[n++]],a[t[n++]],a[t[n++]],a[t[n++]],a[t[n++]]].join("")};e.default=a,t.exports=e.default}));c(U);var I=d((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(P),n=a(U);function a(t){return t&&t.__esModule?t:{default:t}}var i=function(t,e,a){var i=e&&a||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var o=(t=t||{}).random||(t.rng||r.default)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var s=0;s<16;++s)e[i+s]=o[s];return e||(0,n.default)(o)};e.default=i,t.exports=e.default}));c(I);var H=e.deprecate(I,"Deep requiring like `const uuidv4 = require('uuid/v4');` is deprecated as of uuid@7.x. Please require the top-level module when using the Node.js CommonJS module or use ECMAScript Modules when bundling for the browser. See https://github.com/uuidjs/uuid#deep-requires-now-deprecated for more information."),K=d((function(t){!function(e,r){var n={version:"2.11.0",areas:{},apis:{},inherit:function(t,e){for(var r in t)e.hasOwnProperty(r)||Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r));return e},stringify:function(t){return void 0===t||"function"==typeof t?t+"":JSON.stringify(t)},parse:function(t,e){try{return JSON.parse(t,e||n.revive)}catch(e){return t}},fn:function(t,e){for(var r in n.storeAPI[t]=e,n.apis)n.apis[r][t]=e},get:function(t,e){return t.getItem(e)},set:function(t,e,r){t.setItem(e,r)},remove:function(t,e){t.removeItem(e)},key:function(t,e){return t.key(e)},length:function(t){return t.length},clear:function(t){t.clear()},Store:function(t,e,r){var a=n.inherit(n.storeAPI,(function(t,e,r){return 0===arguments.length?a.getAll():"function"==typeof e?a.transact(t,e,r):void 0!==e?a.set(t,e,r):"string"==typeof t||"number"==typeof t?a.get(t):"function"==typeof t?a.each(t):t?a.setAll(t,e):a.clear()}));a._id=t;try{e.setItem("_-bad-_","wolf"),a._area=e,e.removeItem("_-bad-_")}catch(t){}return a._area||(a._area=n.storage("fake")),a._ns=r||"",n.areas[t]||(n.areas[t]=a._area),n.apis[a._ns+a._id]||(n.apis[a._ns+a._id]=a),a},storeAPI:{area:function(t,e){var r=this[t];return r&&r.area||(r=n.Store(t,e,this._ns),this[t]||(this[t]=r)),r},namespace:function(t,e){if(!t)return this._ns?this._ns.substring(0,this._ns.length-1):"";var r=t,a=this[r];if(!(a&&a.namespace||(a=n.Store(this._id,this._area,this._ns+r+"."),this[r]||(this[r]=a),e)))for(var i in n.areas)a.area(i,n.areas[i]);return a},isFake:function(){return"fake"===this._area.name},toString:function(){return"store"+(this._ns?"."+this.namespace():"")+"["+this._id+"]"},has:function(t){return this._area.has?this._area.has(this._in(t)):!!(this._in(t)in this._area)},size:function(){return this.keys().length},each:function(t,e){for(var r=0,a=n.length(this._area);r<a;r++){var i=this._out(n.key(this._area,r));if(void 0!==i&&!1===t.call(this,i,this.get(i),e))break;a>n.length(this._area)&&(a--,r--)}return e||this},keys:function(t){return this.each((function(t,e,r){r.push(t)}),t||[])},get:function(t,e){var r,a=n.get(this._area,this._in(t));return"function"==typeof e&&(r=e,e=null),null!==a?n.parse(a,r):e||a},getAll:function(t){return this.each((function(t,e,r){r[t]=e}),t||{})},transact:function(t,e,r){var n=this.get(t,r),a=e(n);return this.set(t,void 0===a?n:a),this},set:function(t,e,r){var a=this.get(t);return null!=a&&!1===r?e:n.set(this._area,this._in(t),n.stringify(e),r)||a},setAll:function(t,e){var r,n;for(var a in t)n=t[a],this.set(a,n,e)!==n&&(r=!0);return r},add:function(t,e){var r=this.get(t);if(r instanceof Array)e=r.concat(e);else if(null!==r){var a=typeof r;if(a===typeof e&&"object"===a){for(var i in e)r[i]=e[i];e=r}else e=r+e}return n.set(this._area,this._in(t),n.stringify(e)),e},remove:function(t,e){var r=this.get(t,e);return n.remove(this._area,this._in(t)),r},clear:function(){return this._ns?this.each((function(t){n.remove(this._area,this._in(t))}),1):n.clear(this._area),this},clearAll:function(){var t=this._area;for(var e in n.areas)n.areas.hasOwnProperty(e)&&(this._area=n.areas[e],this.clear());return this._area=t,this},_in:function(t){return"string"!=typeof t&&(t=n.stringify(t)),this._ns?this._ns+t:t},_out:function(t){return this._ns?t&&0===t.indexOf(this._ns)?t.substring(this._ns.length):void 0:t}},storage:function(t){return n.inherit(n.storageAPI,{items:{},name:t})},storageAPI:{length:0,has:function(t){return this.items.hasOwnProperty(t)},key:function(t){var e=0;for(var r in this.items)if(this.has(r)&&t===e++)return r},setItem:function(t,e){this.has(t)||this.length++,this.items[t]=e},removeItem:function(t){this.has(t)&&(delete this.items[t],this.length--)},getItem:function(t){return this.has(t)?this.items[t]:null},clear:function(){for(var t in this.items)this.removeItem(t)}}},a=n.Store("local",function(){try{return localStorage}catch(t){}}());a.local=a,a._=n,a.area("session",function(){try{return sessionStorage}catch(t){}}()),a.area("page",n.storage("page")),"function"==typeof r&&void 0!==r.amd?r("store2",[],(function(){return a})):t.exports?t.exports=a:(e.store&&(n.conflict=e.store),e.store=a)}(u,u&&u.define)})),L=new(function(){function t(){var t=H(),e=K("ethpuuid")||(K("ethpuuid",t),t);this._store=K.namespace(e)}var e=t.prototype;return e.store=function(){return this._store.apply(this,arguments)},e.userId=function(){return this._store.namespace()},e.reset=function(t){void 0===t&&(t=H());var e=this._store;K("ethpuuid",t),this._store=K.namespace(t),e.clearAll()},e.clear=function(){this._store.clearAll()},e.switch=function(t){t&&(K("ethpuuid",t),this._store=K.namespace(t))},t}());var M=function(t){function e(r,n,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t.call(this,r),this.listener=n,this.context=a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.subscriber=e}return t.prototype.remove=function(){this.subscriber&&(this.subscriber.removeSubscription(this),this.subscriber=null)},t}());var V=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._subscriptionsForType={},this._currentSubscription=null}return t.prototype.addSubscription=function(t,e){e.subscriber!==this&&("production"!==process.env.NODE_ENV?f(!1,"The subscriber of the subscription is incorrectly set."):f(!1)),this._subscriptionsForType[t]||(this._subscriptionsForType[t]=[]);var r=this._subscriptionsForType[t].length;return this._subscriptionsForType[t].push(e),e.eventType=t,e.key=r,e},t.prototype.removeAllSubscriptions=function(t){void 0===t?this._subscriptionsForType={}:delete this._subscriptionsForType[t]},t.prototype.removeSubscription=function(t){var e=t.eventType,r=t.key,n=this._subscriptionsForType[e];n&&delete n[r]},t.prototype.getSubscriptionsForType=function(t){return this._subscriptionsForType[t]},t}();function z(t){return function(){return t}}var J=function(){};J.thatReturns=z,J.thatReturnsFalse=z(!1),J.thatReturnsTrue=z(!0),J.thatReturnsNull=z(null),J.thatReturnsThis=function(){return this},J.thatReturnsArgument=function(t){return t};var G=J;var q={EventEmitter:function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._subscriber=new V,this._currentSubscription=null}return t.prototype.addListener=function(t,e,r){return this._subscriber.addSubscription(t,new M(this._subscriber,e,r))},t.prototype.once=function(t,e,r){var n=this;return this.addListener(t,(function(){n.removeCurrentListener(),e.apply(r,arguments)}))},t.prototype.removeAllListeners=function(t){this._subscriber.removeAllSubscriptions(t)},t.prototype.removeCurrentListener=function(){this._currentSubscription||("production"!==process.env.NODE_ENV?f(!1,"Not in an emitting cycle; there is no current subscription"):f(!1)),this._subscriber.removeSubscription(this._currentSubscription)},t.prototype.listeners=function(t){var e=this._subscriber.getSubscriptionsForType(t);return e?e.filter(G.thatReturnsTrue).map((function(t){return t.listener})):[]},t.prototype.emit=function(t){var e=this._subscriber.getSubscriptionsForType(t);if(e){for(var r=Object.keys(e),n=0;n<r.length;n++){var a=r[n],i=e[a];i&&(this._currentSubscription=i,this.__emitToSubscription.apply(this,[i].concat(Array.prototype.slice.call(arguments))))}this._currentSubscription=null}},t.prototype.__emitToSubscription=function(t,e){var r=Array.prototype.slice.call(arguments,2);t.listener.apply(t.context,r)},t}(),EmitterSubscription:M}.EventEmitter,B=function(){function t(e){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.__className=this.constructor.name,this.__changed=!1,this.__changeEvent="change",this.__dispatcher=e,this.__emitter=new q,this._dispatchToken=e.register((function(t){r.__invokeOnDispatch(t)}))}return t.prototype.addListener=function(t){return this.__emitter.addListener(this.__changeEvent,t)},t.prototype.getDispatcher=function(){return this.__dispatcher},t.prototype.getDispatchToken=function(){return this._dispatchToken},t.prototype.hasChanged=function(){return this.__dispatcher.isDispatching()||("production"!==process.env.NODE_ENV?f(!1,"%s.hasChanged(): Must be invoked while dispatching.",this.__className):f(!1)),this.__changed},t.prototype.__emitChange=function(){this.__dispatcher.isDispatching()||("production"!==process.env.NODE_ENV?f(!1,"%s.__emitChange(): Must be invoked while dispatching.",this.__className):f(!1)),this.__changed=!0},t.prototype.__invokeOnDispatch=function(t){this.__changed=!1,this.__onDispatch(t),this.__changed&&this.__emitter.emit(this.__changeEvent)},t.prototype.__onDispatch=function(t){"production"!==process.env.NODE_ENV?f(!1,"%s has not overridden FluxStore.__onDispatch(), which is required",this.__className):f(!1)},t}();var $=function(t,e){"production"!==process.env.NODE_ENV?f(!1,"Subclasses of %s must override %s() with their own implementation.",t,e):f(!1)};var W=function(t){function e(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t.call(this,r),this._state=this.getInitialState()}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.getState=function(){return this._state},e.prototype.getInitialState=function(){return $("FluxReduceStore","getInitialState")},e.prototype.reduce=function(t,e){return $("FluxReduceStore","reduce")},e.prototype.areEqual=function(t,e){return t===e},e.prototype.__invokeOnDispatch=function(t){this.__changed=!1;var e=this._state,r=this.reduce(e,t);void 0===r&&("production"!==process.env.NODE_ENV?f(!1,"%s returned undefined from reduce(...), did you forget to return state in the default case? (use null if this was intentional)",this.constructor.name):f(!1)),this.areEqual(e,r)||(this._state=r,this.__emitChange()),this.__changed&&this.__emitter.emit(this.__changeEvent)},e}(B);var Y=function(){this.__data__=[],this.size=0};var X=function(t,e){return t===e||t!=t&&e!=e};var Q=function(t,e){for(var r=t.length;r--;)if(X(t[r][0],e))return r;return-1},Z=Array.prototype.splice;var tt=function(t){var e=this.__data__,r=Q(e,t);return!(r<0)&&(r==e.length-1?e.pop():Z.call(e,r,1),--this.size,!0)};var et=function(t){var e=this.__data__,r=Q(e,t);return r<0?void 0:e[r][1]};var rt=function(t){return Q(this.__data__,t)>-1};var nt=function(t,e){var r=this.__data__,n=Q(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};function at(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}at.prototype.clear=Y,at.prototype.delete=tt,at.prototype.get=et,at.prototype.has=rt,at.prototype.set=nt;var it=at;var ot=function(){this.__data__=new it,this.size=0};var st=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r};var ut=function(t){return this.__data__.get(t)};var ct=function(t){return this.__data__.has(t)},dt="object"==typeof u&&u&&u.Object===Object&&u,lt="object"==typeof self&&self&&self.Object===Object&&self,ft=dt||lt||Function("return this")(),pt=ft.Symbol,ht=Object.prototype,vt=ht.hasOwnProperty,yt=ht.toString,_t=pt?pt.toStringTag:void 0;var gt=function(t){var e=vt.call(t,_t),r=t[_t];try{t[_t]=void 0;var n=!0}catch(t){}var a=yt.call(t);return n&&(e?t[_t]=r:delete t[_t]),a},mt=Object.prototype.toString;var bt=function(t){return mt.call(t)},Tt=pt?pt.toStringTag:void 0;var St=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Tt&&Tt in Object(t)?gt(t):bt(t)};var Ot=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};var wt,jt=function(t){if(!Ot(t))return!1;var e=St(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},At=ft["__core-js_shared__"],Dt=(wt=/[^.]+$/.exec(At&&At.keys&&At.keys.IE_PROTO||""))?"Symbol(src)_1."+wt:"";var Nt=function(t){return!!Dt&&Dt in t},xt=Function.prototype.toString;var Et=function(t){if(null!=t){try{return xt.call(t)}catch(t){}try{return t+""}catch(t){}}return""},kt=/^\[object .+?Constructor\]$/,Rt=Function.prototype,Ct=Object.prototype,Ft=Rt.toString,Pt=Ct.hasOwnProperty,Ut=RegExp("^"+Ft.call(Pt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var It=function(t){return!(!Ot(t)||Nt(t))&&(jt(t)?Ut:kt).test(Et(t))};var Ht=function(t,e){return null==t?void 0:t[e]};var Kt=function(t,e){var r=Ht(t,e);return It(r)?r:void 0},Lt=Kt(ft,"Map"),Mt=Kt(Object,"create");var Vt=function(){this.__data__=Mt?Mt(null):{},this.size=0};var zt=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Jt=Object.prototype.hasOwnProperty;var Gt=function(t){var e=this.__data__;if(Mt){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return Jt.call(e,t)?e[t]:void 0},qt=Object.prototype.hasOwnProperty;var Bt=function(t){var e=this.__data__;return Mt?void 0!==e[t]:qt.call(e,t)};var $t=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=Mt&&void 0===e?"__lodash_hash_undefined__":e,this};function Wt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Wt.prototype.clear=Vt,Wt.prototype.delete=zt,Wt.prototype.get=Gt,Wt.prototype.has=Bt,Wt.prototype.set=$t;var Yt=Wt;var Xt=function(){this.size=0,this.__data__={hash:new Yt,map:new(Lt||it),string:new Yt}};var Qt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};var Zt=function(t,e){var r=t.__data__;return Qt(e)?r["string"==typeof e?"string":"hash"]:r.map};var te=function(t){var e=Zt(this,t).delete(t);return this.size-=e?1:0,e};var ee=function(t){return Zt(this,t).get(t)};var re=function(t){return Zt(this,t).has(t)};var ne=function(t,e){var r=Zt(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};function ae(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ae.prototype.clear=Xt,ae.prototype.delete=te,ae.prototype.get=ee,ae.prototype.has=re,ae.prototype.set=ne;var ie=ae;var oe=function(t,e){var r=this.__data__;if(r instanceof it){var n=r.__data__;if(!Lt||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new ie(n)}return r.set(t,e),this.size=r.size,this};function se(t){var e=this.__data__=new it(t);this.size=e.size}se.prototype.clear=ot,se.prototype.delete=st,se.prototype.get=ut,se.prototype.has=ct,se.prototype.set=oe;var ue=se;var ce=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};var de=function(t){return this.__data__.has(t)};function le(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new ie;++e<r;)this.add(t[e])}le.prototype.add=le.prototype.push=ce,le.prototype.has=de;var fe=le;var pe=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1};var he=function(t,e){return t.has(e)};var ve=function(t,e,r,n,a,i){var o=1&r,s=t.length,u=e.length;if(s!=u&&!(o&&u>s))return!1;var c=i.get(t);if(c&&i.get(e))return c==e;var d=-1,l=!0,f=2&r?new fe:void 0;for(i.set(t,e),i.set(e,t);++d<s;){var p=t[d],h=e[d];if(n)var v=o?n(h,p,d,e,t,i):n(p,h,d,t,e,i);if(void 0!==v){if(v)continue;l=!1;break}if(f){if(!pe(e,(function(t,e){if(!he(f,e)&&(p===t||a(p,t,r,n,i)))return f.push(e)}))){l=!1;break}}else if(p!==h&&!a(p,h,r,n,i)){l=!1;break}}return i.delete(t),i.delete(e),l},ye=ft.Uint8Array;var _e=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r};var ge=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r},me=pt?pt.prototype:void 0,be=me?me.valueOf:void 0;var Te=function(t,e,r,n,a,i,o){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new ye(t),new ye(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return X(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=_e;case"[object Set]":var u=1&n;if(s||(s=ge),t.size!=e.size&&!u)return!1;var c=o.get(t);if(c)return c==e;n|=2,o.set(t,e);var d=ve(s(t),s(e),n,a,i,o);return o.delete(t),d;case"[object Symbol]":if(be)return be.call(t)==be.call(e)}return!1};var Se=function(t,e){for(var r=-1,n=e.length,a=t.length;++r<n;)t[a+r]=e[r];return t},Oe=Array.isArray;var we=function(t,e,r){var n=e(t);return Oe(t)?n:Se(n,r(t))};var je=function(t,e){for(var r=-1,n=null==t?0:t.length,a=0,i=[];++r<n;){var o=t[r];e(o,r,t)&&(i[a++]=o)}return i};var Ae=function(){return[]},De=Object.prototype.propertyIsEnumerable,Ne=Object.getOwnPropertySymbols,xe=Ne?function(t){return null==t?[]:(t=Object(t),je(Ne(t),(function(e){return De.call(t,e)})))}:Ae;var Ee=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n};var ke=function(t){return null!=t&&"object"==typeof t};var Re=function(t){return ke(t)&&"[object Arguments]"==St(t)},Ce=Object.prototype,Fe=Ce.hasOwnProperty,Pe=Ce.propertyIsEnumerable,Ue=Re(function(){return arguments}())?Re:function(t){return ke(t)&&Fe.call(t,"callee")&&!Pe.call(t,"callee")};var Ie=function(){return!1},He=d((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,a=n&&n.exports===r?ft.Buffer:void 0,i=(a?a.isBuffer:void 0)||Ie;t.exports=i})),Ke=/^(?:0|[1-9]\d*)$/;var Le=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&Ke.test(t))&&t>-1&&t%1==0&&t<e};var Me=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},Ve={};Ve["[object Float32Array]"]=Ve["[object Float64Array]"]=Ve["[object Int8Array]"]=Ve["[object Int16Array]"]=Ve["[object Int32Array]"]=Ve["[object Uint8Array]"]=Ve["[object Uint8ClampedArray]"]=Ve["[object Uint16Array]"]=Ve["[object Uint32Array]"]=!0,Ve["[object Arguments]"]=Ve["[object Array]"]=Ve["[object ArrayBuffer]"]=Ve["[object Boolean]"]=Ve["[object DataView]"]=Ve["[object Date]"]=Ve["[object Error]"]=Ve["[object Function]"]=Ve["[object Map]"]=Ve["[object Number]"]=Ve["[object Object]"]=Ve["[object RegExp]"]=Ve["[object Set]"]=Ve["[object String]"]=Ve["[object WeakMap]"]=!1;var ze=function(t){return ke(t)&&Me(t.length)&&!!Ve[St(t)]};var Je=function(t){return function(e){return t(e)}},Ge=d((function(t,e){var r=e&&!e.nodeType&&e,n=r&&t&&!t.nodeType&&t,a=n&&n.exports===r&&dt.process,i=function(){try{var t=n&&n.require&&n.require("util").types;return t||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=i})),qe=Ge&&Ge.isTypedArray,Be=qe?Je(qe):ze,$e=Object.prototype.hasOwnProperty;var We=function(t,e){var r=Oe(t),n=!r&&Ue(t),a=!r&&!n&&He(t),i=!r&&!n&&!a&&Be(t),o=r||n||a||i,s=o?Ee(t.length,String):[],u=s.length;for(var c in t)!e&&!$e.call(t,c)||o&&("length"==c||a&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Le(c,u))||s.push(c);return s},Ye=Object.prototype;var Xe=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ye)};var Qe=function(t,e){return function(r){return t(e(r))}}(Object.keys,Object),Ze=Object.prototype.hasOwnProperty;var tr=function(t){if(!Xe(t))return Qe(t);var e=[];for(var r in Object(t))Ze.call(t,r)&&"constructor"!=r&&e.push(r);return e};var er=function(t){return null!=t&&Me(t.length)&&!jt(t)};var rr=function(t){return er(t)?We(t):tr(t)};var nr=function(t){return we(t,rr,xe)},ar=Object.prototype.hasOwnProperty;var ir=function(t,e,r,n,a,i){var o=1&r,s=nr(t),u=s.length;if(u!=nr(e).length&&!o)return!1;for(var c=u;c--;){var d=s[c];if(!(o?d in e:ar.call(e,d)))return!1}var l=i.get(t);if(l&&i.get(e))return l==e;var f=!0;i.set(t,e),i.set(e,t);for(var p=o;++c<u;){var h=t[d=s[c]],v=e[d];if(n)var y=o?n(v,h,d,e,t,i):n(h,v,d,t,e,i);if(!(void 0===y?h===v||a(h,v,r,n,i):y)){f=!1;break}p||(p="constructor"==d)}if(f&&!p){var _=t.constructor,g=e.constructor;_==g||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof g&&g instanceof g||(f=!1)}return i.delete(t),i.delete(e),f},or=Kt(ft,"DataView"),sr=Kt(ft,"Promise"),ur=Kt(ft,"Set"),cr=Kt(ft,"WeakMap"),dr=Et(or),lr=Et(Lt),fr=Et(sr),pr=Et(ur),hr=Et(cr),vr=St;(or&&"[object DataView]"!=vr(new or(new ArrayBuffer(1)))||Lt&&"[object Map]"!=vr(new Lt)||sr&&"[object Promise]"!=vr(sr.resolve())||ur&&"[object Set]"!=vr(new ur)||cr&&"[object WeakMap]"!=vr(new cr))&&(vr=function(t){var e=St(t),r="[object Object]"==e?t.constructor:void 0,n=r?Et(r):"";if(n)switch(n){case dr:return"[object DataView]";case lr:return"[object Map]";case fr:return"[object Promise]";case pr:return"[object Set]";case hr:return"[object WeakMap]"}return e});var yr=vr,_r=Object.prototype.hasOwnProperty;var gr=function(t,e,r,n,a,i){var o=Oe(t),s=Oe(e),u=o?"[object Array]":yr(t),c=s?"[object Array]":yr(e),d="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u),l="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),f=u==c;if(f&&He(t)){if(!He(e))return!1;o=!0,d=!1}if(f&&!d)return i||(i=new ue),o||Be(t)?ve(t,e,r,n,a,i):Te(t,e,u,r,n,a,i);if(!(1&r)){var p=d&&_r.call(t,"__wrapped__"),h=l&&_r.call(e,"__wrapped__");if(p||h){var v=p?t.value():t,y=h?e.value():e;return i||(i=new ue),a(v,y,r,n,i)}}return!!f&&(i||(i=new ue),ir(t,e,r,n,a,i))};var mr=function t(e,r,n,a,i){return e===r||(null==e||null==r||!ke(e)&&!ke(r)?e!=e&&r!=r:gr(e,r,n,a,t,i))};var br=function(t,e,r,n){var a=r.length,i=a,o=!n;if(null==t)return!i;for(t=Object(t);a--;){var s=r[a];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++a<i;){var u=(s=r[a])[0],c=t[u],d=s[1];if(o&&s[2]){if(void 0===c&&!(u in t))return!1}else{var l=new ue;if(n)var f=n(c,d,u,t,e,l);if(!(void 0===f?mr(d,c,3,n,l):f))return!1}}return!0};var Tr=function(t){return t==t&&!Ot(t)};var Sr=function(t){for(var e=rr(t),r=e.length;r--;){var n=e[r],a=t[n];e[r]=[n,a,Tr(a)]}return e};var Or=function(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}};var wr=function(t){var e=Sr(t);return 1==e.length&&e[0][2]?Or(e[0][0],e[0][1]):function(r){return r===t||br(r,t,e)}};var jr=function(t){return"symbol"==typeof t||ke(t)&&"[object Symbol]"==St(t)},Ar=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Dr=/^\w*$/;var Nr=function(t,e){if(Oe(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!jr(t))||(Dr.test(t)||!Ar.test(t)||null!=e&&t in Object(e))};function xr(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,a=e?e.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var o=t.apply(this,n);return r.cache=i.set(a,o)||i,o};return r.cache=new(xr.Cache||ie),r}xr.Cache=ie;var Er=xr;var kr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rr=/\\(\\)?/g,Cr=function(t){var e=Er(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(kr,(function(t,r,n,a){e.push(n?a.replace(Rr,"$1"):r||t)})),e}));var Fr=function(t,e){for(var r=-1,n=null==t?0:t.length,a=Array(n);++r<n;)a[r]=e(t[r],r,t);return a},Pr=pt?pt.prototype:void 0,Ur=Pr?Pr.toString:void 0;var Ir=function t(e){if("string"==typeof e)return e;if(Oe(e))return Fr(e,t)+"";if(jr(e))return Ur?Ur.call(e):"";var r=e+"";return"0"==r&&1/e==-1/0?"-0":r};var Hr=function(t){return null==t?"":Ir(t)};var Kr=function(t,e){return Oe(t)?t:Nr(t,e)?[t]:Cr(Hr(t))};var Lr=function(t){if("string"==typeof t||jr(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e};var Mr=function(t,e){for(var r=0,n=(e=Kr(e,t)).length;null!=t&&r<n;)t=t[Lr(e[r++])];return r&&r==n?t:void 0};var Vr=function(t,e,r){var n=null==t?void 0:Mr(t,e);return void 0===n?r:n};var zr=function(t,e){return null!=t&&e in Object(t)};var Jr=function(t,e,r){for(var n=-1,a=(e=Kr(e,t)).length,i=!1;++n<a;){var o=Lr(e[n]);if(!(i=null!=t&&r(t,o)))break;t=t[o]}return i||++n!=a?i:!!(a=null==t?0:t.length)&&Me(a)&&Le(o,a)&&(Oe(t)||Ue(t))};var Gr=function(t,e){return null!=t&&Jr(t,e,zr)};var qr=function(t,e){return Nr(t)&&Tr(e)?Or(Lr(t),e):function(r){var n=Vr(r,t);return void 0===n&&n===e?Gr(r,t):mr(e,n,3)}};var Br=function(t){return t};var $r=function(t){return function(e){return null==e?void 0:e[t]}};var Wr=function(t){return function(e){return Mr(e,t)}};var Yr=function(t){return Nr(t)?$r(Lr(t)):Wr(t)};var Xr=function(t){return"function"==typeof t?t:null==t?Br:"object"==typeof t?Oe(t)?qr(t[0],t[1]):wr(t):Yr(t)};var Qr=function(t,e,r,n){for(var a=t.length,i=r+(n?1:-1);n?i--:++i<a;)if(e(t[i],i,t))return i;return-1};var Zr=function(t){return t!=t};var tn=function(t,e,r){for(var n=r-1,a=t.length;++n<a;)if(t[n]===e)return n;return-1};var en=function(t,e,r){return e==e?tn(t,e,r):Qr(t,Zr,r)};var rn=function(t,e){return!!(null==t?0:t.length)&&en(t,e,0)>-1};var nn=function(t,e,r){for(var n=-1,a=null==t?0:t.length;++n<a;)if(r(e,t[n]))return!0;return!1};var an=function(){},on=ur&&1/ge(new ur([,-0]))[1]==1/0?function(t){return new ur(t)}:an;var sn=function(t,e,r){var n=-1,a=rn,i=t.length,o=!0,s=[],u=s;if(r)o=!1,a=nn;else if(i>=200){var c=e?null:on(t);if(c)return ge(c);o=!1,a=he,u=new fe}else u=e?[]:s;t:for(;++n<i;){var d=t[n],l=e?e(d):d;if(d=r||0!==d?d:0,o&&l==l){for(var f=u.length;f--;)if(u[f]===l)continue t;e&&u.push(l),s.push(d)}else a(u,l,r)||(u!==s&&u.push(l),s.push(d))}return s};var un=function(t,e){return t&&t.length?sn(t,Xr(e)):[]};function cn(t){return[Object,Array].includes((t||{}).constructor)&&!Object.entries(t||{}).length}function dn(t,e){return Object.keys(t).filter((function(t){return-1===e.indexOf(t)})).reduce((function(e,r){var n;return Object.assign(e,((n={})[r]=t[r],n))}),{})}function ln(t,e){return Object.keys(t).filter((function(r){return e(t[r])})).reduce((function(e,r){var n;return Object.assign(e,((n={})[r]=t[r],n))}),{})}function fn(t,e){return Object.keys(t).reduce((function(r,n){var a;return Object.assign(r,((a={})[n]=e(t[n],n),a))}),{})}var pn,hn=new(function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).handleResetFromData=function(t){return o({},t,{lastSyncedAt:1})},e.handleResetFromStore=function(){return e.getInitialState()},e.handleTogglePushChanges=function(t,r){return o({},t,{},e.getInitialState(),{pushChanges:"boolean"==typeof r.payload?r.payload:!t.pushChanges})},e.handleUpdateLastSyncTime=function(t,e){return t.lastSyncedAt===e.payload?t:o({},t,{lastSyncedAt:e.payload})},e.handleClearDatabase=function(t){return o({},t,{lastSyncedAt:1})},e.handleToggleShowDialogHelp=function(t,e){return o({},t,{showDialogHelp:Boolean(e.payload)})},e.handleToggleSyncTagsAndNotes=function(t,e){return o({},t,{syncTagsAndNotes:Boolean(e.payload)})},e}s(e,t);var r=e.prototype;return r.getInitialState=function(){var t=o({},L.store(this.key));return void 0===t.showDialogHelp&&(t.showDialogHelp=!0),void 0===t.pushChanges&&(t.pushChanges=!0),void 0===t.lastSyncedAt&&(t.lastSyncedAt=1),void 0===t.syncTagsAndNotes&&(t.syncTagsAndNotes=!0),t},r.canSyncTagsAndNotes=function(){return this.getState().syncTagsAndNotes},r.canShowDialogHelp=function(){return this.getState().showDialogHelp},r.canPushChanges=function(){return this.getState().pushChanges},r.getLastSyncedAt=function(){return this.getState().lastSyncedAt||1},r.reduce=function(t,e){return e.type&&"function"==typeof this.actions[e.type]?this.actions[e.type](t,e):t},n(e,[{key:"key",get:function(){return"app"}},{key:"actions",get:function(){var t;return(t={}).clear_database=this.handleClearDatabase,t.reset_from_data=this.handleResetFromData,t.reset_from_store=this.handleResetFromStore,t.toggle_push_changes=this.handleTogglePushChanges,t.toggle_show_dialog_help=this.handleToggleShowDialogHelp,t.toggle_sync_tags_and_notes=this.handleToggleSyncTagsAndNotes,t.update_last_sync_time=this.handleUpdateLastSyncTime,t}}]),e}(W))(h),vn={items:{}},yn=new(function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).handleResetFromData=function(t,r){e.getDispatcher().waitFor([hn.getDispatchToken()]);var n=r.payload;return n.userTags?{items:n.userTags.items.reduce((function(t,r){return t[e.createKey(r.tagName)]={tagName:r.tagName,tagUserNote:r.tagUserNote,dirty:1},t}),{})}:vn},e.handleClearDatabase=function(){return e.getDispatcher().waitFor([hn.getDispatchToken()]),vn},e.handleResetFromStore=function(){return e.getDispatcher().waitFor([hn.getDispatchToken()]),e.getInitialState()},e.handleAddAddressTag=function(t,r){var n,a,i=r.payload.tag,s=e.createKey(i),u=null==t||null===(n=t.items)||void 0===n?void 0:n[s];return u=u&&!u.removed?u:void 0,o({},t,{items:o({},null==t?void 0:t.items,(a={},a[s]={tagName:i,tagUserNote:void 0,dirty:u?u.dirty||2:1,removed:!1},a))})},e.handleReplaceAddressTagsAndNote=function(t,r){var n;if(!(null==r||null===(n=r.payload)||void 0===n?void 0:n.tags))return t;var a=r.payload.tags.reduce((function(r,n){var a,i=e.createKey(n),o=null==t||null===(a=t.items)||void 0===a?void 0:a[i];return o=o&&!o.removed?o:void 0,r[i]={tagName:n,tagUserNote:void 0,dirty:o?o.dirty||2:1,removed:!1},r}),{});return o({},t,{items:o({},null==t?void 0:t.items,{},a)})},e.handleSyncChanges=function(t,r){var n,a,i,s,u,c;if(!(null==r||null===(n=r.payload)||void 0===n?void 0:n.userTag))return t;var d=r.payload.userTag,l=d.created,f=d.updated,p=d.deleted,h=d.update,v=d.insert,y=d.remove;if(!cn(p)||!cn(y)){var _=(p||y).map((function(t){return e.createKey(t.tagName)}));t=o({},t,{items:dn(t.items,_)})}return t=o({},t,{items:o({},null===(a=t)||void 0===a?void 0:a.items,{},null===(i=l||v)||void 0===i||null===(s=i.reduce)||void 0===s?void 0:s.call(i,(function(t,r){var n;return Object.assign(t,((n={})[e.createKey(r.tagName)]=r,n))}),{}),{},null===(u=f||h)||void 0===u||null===(c=u.reduce)||void 0===c?void 0:c.call(u,(function(t,r){var n;return Object.assign(t,((n={})[e.createKey(r.tagName)]=r,n))}),{}))})},e.handleMarkAllAsDirty=function(t){var e={};for(var r in t.items){var n,a;e[r]=o({},t.items[r],{dirty:null!==(n=null===(a=t.items[r])||void 0===a?void 0:a.dirty)&&void 0!==n?n:1})}return o({},t,{items:e})},e.handleUpdateDirtyStatus=function(t,e){var r,n,a,i,s=null!==(r=null==e||null===(n=e.payload)||void 0===n?void 0:n.tags)&&void 0!==r?r:[],u=null==e||null===(a=e.payload)||void 0===a?void 0:a.from,c=null==e||null===(i=e.payload)||void 0===i?void 0:i.to;if(cn(s)||!u||!c)return t;var d={};for(var l in t.items){var f;(null===(f=t.items[l])||void 0===f?void 0:f.dirty)===u&&-1!==s.indexOf(l)?d[l]=o({},t.items[l],{dirty:c}):d[l]=t.items[l]}return o({},t,{items:d})},e}s(e,t);var r=e.prototype;return r.createKey=function(t){return String(t).toLowerCase()},r.getInitialState=function(){return L.store(this.key)||vn},r.getStoreState=function(){return{items:this.getState().items}},r.getExportJSON=function(){var t=this.getState();return{userTags:{items:Object.values(t.items).filter((function(t){return!t.removed})).map((function(t){return{tagName:t.tagName,tagUserNote:t.tagUserNote}}))}}},r.getTags=function(){var t=this.getState();return Object.values(t.items).map((function(t){return t.tagName})).sort()},r.getTag=function(t){var e=this;t=this.createKey(t);var r=this.getState();return Object.values(r.items).find((function(r){return e.createKey(r.tagName)===t}))},r.getChanges=function(){var t=this.getState(),e=Object.values(fn(ln(t.items,(function(t){return t.removed})),(function(t){return{tagName:t.tagName}}))),r=Object.values(fn(ln(t.items,(function(t){return 1===t.dirty&&!t.removed})),(function(t){return{tagName:t.tagName,tagUserNote:t.tagUserNote}}))),n=Object.values(fn(ln(t.items,(function(t){return 2===t.dirty&&!t.removed})),(function(t){return{tagName:t.tagName,tagUserNote:t.tagUserNote}})));if(!(cn(e)&&cn(r)&&cn(n)))return{userTag:{update:n,insert:r,remove:e}}},r.reduce=function(t,e){return e.type&&"function"==typeof this.actions[e.type]?this.actions[e.type](t,e):t},n(e,[{key:"key",get:function(){return"userTags"}},{key:"actions",get:function(){var t;return(t={}).address_tag_add=this.handleAddAddressTag,t.clear_database=this.handleClearDatabase,t.mark_all_as_dirty=this.handleMarkAllAsDirty,t.address_tags_and_note_replace=this.handleReplaceAddressTagsAndNote,t.reset_from_data=this.handleResetFromData,t.reset_from_store=this.handleResetFromStore,t.sync_changes=this.handleSyncChanges,t.update_dirty_status=this.handleUpdateDirtyStatus,t}}]),e}(W))(h),_n={items:{},tmpRemoved:{}},gn=new(function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).handleResetFromData=function(t,r){e.getDispatcher().waitFor([hn.getDispatchToken()]);var n=r.payload;if(n.userAddresses){var a=Date.now();return{tmpRemoved:{},items:n.userAddresses.items.reduce((function(t,r){return t[e.createKey(r.address)]={address:r.address,addressTags:r.addressTags,addressUserNote:r.addressUserNote,createdTime:r.createdTime||a,updatedTime:r.updatedTime||a,dirty:1},t}),{})}}return _n},e.handleClearDatabase=function(){return e.getDispatcher().waitFor([hn.getDispatchToken()]),_n},e.handleResetFromStore=function(){return e.getDispatcher().waitFor([hn.getDispatchToken()]),e.getInitialState()},e.handleRemoveAddressTag=function(t,r){var n,a,i,s,u=Date.now(),c=r.payload,d=yn.createKey(c.tag),l=e.createKey(c.address),f=null==t||null===(n=t.items)||void 0===n?void 0:n[l],p=null!==(a=null===(i=f=f&&!f.removed?f:void 0)||void 0===i?void 0:i.addressTags)&&void 0!==a?a:[];if(p=p.filter((function(t){return yn.createKey(t)!==d})),f&&cn(p)&&cn(f.addressUserNote)){var h,v,y,_=o({createdTime:u},f,{address:c.address,addressTags:p,removed:!0,updatedTime:u});return o({},t,{tmpRemoved:o({},null==t?void 0:t.tmpRemoved,(h={},h[l]=_,h)),items:1===(null===(v=f)||void 0===v?void 0:v.dirty)?dn(t.items,[l]):o({},null==t?void 0:t.items,(y={},y[l]=_,y))})}var g=o({createdTime:u},f,{address:c.address,addressTags:p,dirty:f?f.dirty||2:1,removed:!1,updatedTime:u});return o({},t,{tmpRemoved:dn(null==t?void 0:t.tmpRemoved,[l]),items:o({},null==t?void 0:t.items,(s={},s[l]=g,s))})},e.handleAddAddressTag=function(t,r){var n,a,i,s;e.getDispatcher().waitFor([yn.getDispatchToken()]);var u=r.payload,c=(yn.createKey(u.tag),e.createKey(u.address)),d=null==t||null===(n=t.items)||void 0===n?void 0:n[c],l=null!==(a=null===(i=d=d&&!d.removed?d:void 0)||void 0===i?void 0:i.addressTags)&&void 0!==a?a:[],f=Date.now();return o({},t,{tmpRemoved:dn(null==t?void 0:t.tmpRemoved,[c]),items:o({},null==t?void 0:t.items,(s={},s[c]=o({createdTime:f},d,{address:u.address,addressTags:l.concat(u.tag),dirty:d?d.dirty||2:1,removed:!1,updatedTime:f}),s))})},e.handleReplaceAddressTagsAndNote=function(t,r){var n,a;e.getDispatcher().waitFor([yn.getDispatchToken()]);var i=r.payload,s=e.createKey(i.address),u=null==t||null===(n=t.items)||void 0===n?void 0:n[s];u=u&&!u.removed?u:void 0;var c=un(i.tags,(function(t){return yn.createKey(t)})),d=Date.now();if(cn(c)&&cn(i.note)){var l,f,p;if(!u)return t;var h=o({createdTime:d},u,{addressTags:c,addressUserNote:i.note,address:i.address,removed:!0,updatedTime:d});return o({},t,{tmpRemoved:o({},null==t?void 0:t.tmpRemoved,(l={},l[s]=h,l)),items:1===(null===(f=u)||void 0===f?void 0:f.dirty)?dn(t.items,[s]):o({},null==t?void 0:t.items,(p={},p[s]=h,p))})}var v=o({createdTime:d},u,{addressTags:c,addressUserNote:i.note,address:i.address,dirty:u?u.dirty||2:1,removed:!1,updatedTime:d});return o({},t,{tmpRemoved:dn(null==t?void 0:t.tmpRemoved,[s]),items:o({},null==t?void 0:t.items,(a={},a[s]=v,a))})},e.handleRemoveAddress=function(t,r){var n,a,i,s=e.createKey(r.payload),u=null==t||null===(n=t.items)||void 0===n?void 0:n[s],c=o({},u,{removed:!0});return o({},t,{tmpRemoved:o({},null==t?void 0:t.tmpRemoved,(a={},a[s]=c,a)),items:1===(null==u?void 0:u.dirty)?dn(t.items,[s]):o({},null==t?void 0:t.items,(i={},i[s]=c,i))})},e.handleSyncChanges=function(t,r){var n,a,i,s,u,c,d,l,f,p,h,v;if(e.getDispatcher().waitFor([yn.getDispatchToken()]),!(null==r||null===(n=r.payload)||void 0===n?void 0:n.userAddress))return t;var y=r.payload.userAddress,_=y.created,g=y.updated,m=y.deleted,b=y.update,T=y.insert,S=y.remove;if(!cn(m)||!cn(S)){var O=(m||S).map((function(t){var r;return e.createKey(null!==(r=null==t?void 0:t.address)&&void 0!==r?r:t)}));t=o({},t,{items:dn(t.items,O)})}var w=[].concat(null!==(a=null===(i=_||T)||void 0===i||null===(s=i.map)||void 0===s?void 0:s.call(i,(function(t){return e.createKey(t.address)})))&&void 0!==a?a:[],null!==(u=null===(c=g||b)||void 0===c||null===(d=c.map)||void 0===d?void 0:d.call(c,(function(t){return e.createKey(t.address)})))&&void 0!==u?u:[]);return t=o({},t,{tmpRemoved:dn(t.tmpRemoved,w),items:o({},null===(l=t)||void 0===l?void 0:l.items,{},null===(f=_||T)||void 0===f||null===(p=f.reduce)||void 0===p?void 0:p.call(f,(function(t,r){var n;return Object.assign(t,((n={})[e.createKey(r.address)]=r,n))}),{}),{},null===(h=g||b)||void 0===h||null===(v=h.reduce)||void 0===v?void 0:v.call(h,(function(t,r){var n;return Object.assign(t,((n={})[e.createKey(r.address)]=r,n))}),{}))})},e.handleMarkAllAsDirty=function(t){var e={};for(var r in t.items){var n,a;e[r]=o({},t.items[r],{dirty:null!==(n=null===(a=t.items[r])||void 0===a?void 0:a.dirty)&&void 0!==n?n:1})}return o({},t,{items:e})},e.handleUpdateDirtyStatus=function(t,e){var r,n,a,i,s=null!==(r=null==e||null===(n=e.payload)||void 0===n?void 0:n.addresses)&&void 0!==r?r:[],u=null==e||null===(a=e.payload)||void 0===a?void 0:a.from,c=null==e||null===(i=e.payload)||void 0===i?void 0:i.to;if(cn(s)||!u||!c)return t;var d={};for(var l in t.items){var f;(null===(f=t.items[l])||void 0===f?void 0:f.dirty)===u&&-1!==s.indexOf(l)?d[l]=o({},t.items[l],{dirty:c}):d[l]=t.items[l]}return o({},t,{items:d})},e}s(e,t);var r=e.prototype;return r.createKey=function(t){return String(t).toLowerCase()},r.getInitialState=function(){return L.store(this.key)||_n},r.getStoreState=function(){return{items:this.getState().items}},r.getExportJSON=function(){var t=this.getState();return{userAddresses:{items:Object.values(t.items).filter((function(t){return!t.removed})).map((function(t){return{address:t.address,addressTags:t.addressTags,addressUserNote:t.addressUserNote,createdTime:t.createdTime,updatedTime:t.updatedTime}}))}}},r.getItems=function(){var t,e,r=this.getState();return[].concat(Object.values(null!==(t=null==r?void 0:r.items)&&void 0!==t?t:{}).filter((function(t){return!t.removed})),Object.values(null!==(e=null==r?void 0:r.tmpRemoved)&&void 0!==e?e:{}))},r.getAddressNote=function(t){var e,r=this.getState(),n=null==r||null===(e=r.items)||void 0===e?void 0:e[this.createKey(t)];return n&&!n.removed&&n.addressUserNote||""},r.getAddressTags=function(t){var e,r=this.getState(),n=null==r||null===(e=r.items)||void 0===e?void 0:e[this.createKey(t)];return n&&!n.removed&&n.addressTags||[]},r.getAllAddressTagsCount=function(){var t=this.getState(),e=0;for(var r in t.items){var n,a=null===(n=t.items)||void 0===n?void 0:n[r];a&&!a.removed&&(e+=1)}return e},r.getChanges=function(){var t=this.getState(),e=Object.values(fn(ln(t.items,(function(t){return t.removed})),(function(t,e){return{address:e}}))),r=Object.values(fn(ln(t.items,(function(t){return 1===t.dirty&&!t.removed})),(function(t){return{address:t.address,addressTags:t.addressTags,addressUserNote:t.addressUserNote,createdTime:t.createdTime,updatedTime:t.updatedTime}}))),n=Object.values(fn(ln(t.items,(function(t){return 2===t.dirty&&!t.removed})),(function(t){return{address:t.address,addressTags:t.addressTags,addressUserNote:t.addressUserNote,createdTime:t.createdTime,updatedTime:t.updatedTime}})));if(!(cn(e)&&cn(r)&&cn(n)))return{userAddress:{update:n,insert:r,remove:e}}},r.reduce=function(t,e){return e.type&&"function"==typeof this.actions[e.type]?this.actions[e.type](t,e):t},n(e,[{key:"key",get:function(){return"userAddresses"}},{key:"actions",get:function(){var t;return(t={}).address_tag_add=this.handleAddAddressTag,t.clear_database=this.handleClearDatabase,t.mark_all_as_dirty=this.handleMarkAllAsDirty,t.address_tag_remove=this.handleRemoveAddressTag,t.address_remove=this.handleRemoveAddress,t.address_tags_and_note_replace=this.handleReplaceAddressTagsAndNote,t.reset_from_data=this.handleResetFromData,t.reset_from_store=this.handleResetFromStore,t.sync_changes=this.handleSyncChanges,t.update_dirty_status=this.handleUpdateDirtyStatus,t}}]),e}(W))(h),mn=Date.now(),bn={},Tn=new(function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).handleResetFromData=function(t,r){e.getDispatcher().waitFor([hn.getDispatchToken()]);var n=r.payload;return n.userInfo?{userName:n.userInfo.userName}:bn},e.handleClearDatabase=function(t){return e.getDispatcher().waitFor([hn.getDispatchToken()]),o({},t)},e.handleResetFromStore=function(){return e.getDispatcher().waitFor([hn.getDispatchToken()]),e.getInitialState()},e.handleUpdateUsername=function(t,e){return o({},t,{userName:e.payload})},e}s(e,t);var r=e.prototype;return r.getInitialState=function(){var t=L.store(this.key)||bn;return t.dateCreated||(t.dateCreated=Date.now()),mn>t.lastLogin&&(t.lastLogin=mn),t},r.getExportJSON=function(){return{userInfo:{userName:this.getState().userName}}},r.reduce=function(t,e){return e.type&&"function"==typeof this.actions[e.type]?this.actions[e.type](t,e):t},n(e,[{key:"key",get:function(){return"userInfo"}},{key:"actions",get:function(){var t;return(t={}).reset_from_store=this.handleResetFromStore,t.userinfo_username_update=this.handleUpdateUsername,t.clear_database=this.handleClearDatabase,t.reset_from_data=this.handleResetFromData,t}}]),e}(W))(h),Sn={items:{},tmpRemoved:{}},On=new(function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).handleResetFromData=function(t,r){e.getDispatcher().waitFor([hn.getDispatchToken()]);var n=r.payload;if(n.userTxs){var a=Date.now();return{tmpRemoved:{},items:n.userTxs.items.reduce((function(t,r){return t[e.createKey(r.txHash)]={txHash:r.txHash,txUserNote:r.txUserNote,createdTime:r.createdTime||a,updatedTime:r.updatedTime||a,dirty:1},t}),{})}}return Sn},e.handleClearDatabase=function(){return e.getDispatcher().waitFor([hn.getDispatchToken()]),Sn},e.handleResetFromStore=function(){return e.getDispatcher().waitFor([hn.getDispatchToken()]),e.getInitialState()},e.handleMarkAllAsDirty=function(t){var e={};for(var r in t.items){var n,a;e[r]=o({},t.items[r],{dirty:null!==(n=null===(a=t.items[r])||void 0===a?void 0:a.dirty)&&void 0!==n?n:1})}return o({},t,{items:e})},e.handleSyncChanges=function(t,r){var n,a,i,s,u,c,d,l,f,p,h,v;if(cn(null==r||null===(n=r.payload)||void 0===n?void 0:n.userTx))return t;var y=r.payload.userTx,_=y.created,g=y.updated,m=y.deleted,b=y.update,T=y.insert,S=y.remove;if(!cn(m)||!cn(S)){var O=(m||S).map((function(t){var r;return e.createKey(null!==(r=null==t?void 0:t.txHash)&&void 0!==r?r:t)}));t=o({},t,{items:dn(t.items,O)})}if(cn(_)&&cn(T)&&cn(g)&&cn(b))return t;var w=[].concat(null!==(a=null===(i=_||T)||void 0===i||null===(s=i.map)||void 0===s?void 0:s.call(i,(function(t){return e.createKey(t.txHash)})))&&void 0!==a?a:[],null!==(u=null===(c=g||b)||void 0===c||null===(d=c.map)||void 0===d?void 0:d.call(c,(function(t){return e.createKey(t.txHash)})))&&void 0!==u?u:[]);return t=o({},t,{tmpRemoved:dn(t.tmpRemoved,w),items:o({},null===(l=t)||void 0===l?void 0:l.items,{},null===(f=_||T)||void 0===f||null===(p=f.reduce)||void 0===p?void 0:p.call(f,(function(t,r){var n;return Object.assign(t,((n={})[e.createKey(r.txHash)]=r,n))}),{}),{},null===(h=g||b)||void 0===h||null===(v=h.reduce)||void 0===v?void 0:v.call(h,(function(t,r){var n;return Object.assign(t,((n={})[e.createKey(r.txHash)]=r,n))}),{}))})},e.handleReplaceTxNote=function(t,r){var n,a,i=Date.now(),s=r.payload,u=e.createKey(s.txHash),c=null==t||null===(n=t.items)||void 0===n?void 0:n[u];if(c=c&&!c.removed?c:void 0,!s.note){var d,l,f;if(!c)return t;var p=o({createdTime:i},c,{txHash:s.txHash,txUserNote:s.note,removed:!0,updatedTime:i});return o({},t,{tmpRemoved:o({},null==t?void 0:t.tmpRemoved,(d={},d[u]=p,d)),items:1===(null===(l=c)||void 0===l?void 0:l.dirty)?dn(t.items,[u]):o({},null==t?void 0:t.items,(f={},f[u]=p,f))})}var h=o({createdTime:i},c,{txHash:s.txHash,txUserNote:s.note,dirty:c?c.dirty||2:1,removed:!1,updatedTime:i});return o({},t,{tmpRemoved:dn(null==t?void 0:t.tmpRemoved,[u]),items:o({},null==t?void 0:t.items,(a={},a[u]=h,a))})},e.handleRemoveTx=function(t,r){var n,a,i,s=e.createKey(r.payload),u=null==t||null===(n=t.items)||void 0===n?void 0:n[s],c=o({},u,{removed:!0});return o({},t,{tmpRemoved:o({},null==t?void 0:t.tmpRemoved,(a={},a[s]=c,a)),items:1===(null==u?void 0:u.dirty)?dn(t.items,[s]):o({},null==t?void 0:t.items,(i={},i[s]=c,i))})},e.handleUpdateDirtyStatus=function(t,e){var r,n,a,i,s=null!==(r=null==e||null===(n=e.payload)||void 0===n?void 0:n.txs)&&void 0!==r?r:[],u=null==e||null===(a=e.payload)||void 0===a?void 0:a.from,c=null==e||null===(i=e.payload)||void 0===i?void 0:i.to;if(cn(s)||!u||!c)return t;var d={};for(var l in t.items){var f;(null===(f=t.items[l])||void 0===f?void 0:f.dirty)===u&&-1!==s.indexOf(l)?d[l]=o({},t.items[l],{dirty:c}):d[l]=t.items[l]}return o({},t,{items:d})},e}s(e,t);var r=e.prototype;return r.createKey=function(t){return String(t).toLowerCase()},r.getInitialState=function(){return L.store(this.key)||Sn},r.getStoreState=function(){return{items:this.getState().items}},r.getExportJSON=function(){var t=this.getState();return{userTxs:{items:Object.values(t.items).filter((function(t){return!t.removed})).map((function(t){return{txHash:t.txHash,txUserNote:t.txUserNote,createdTime:t.createdTime,updatedTime:t.updatedTime}}))}}},r.getItems=function(){var t,e,r=this.getState();return[].concat(Object.values(null!==(t=null==r?void 0:r.items)&&void 0!==t?t:{}).filter((function(t){return!t.removed})),Object.values(null!==(e=null==r?void 0:r.tmpRemoved)&&void 0!==e?e:{}))},r.getTxNote=function(t){var e,r=this.getState(),n=null==r||null===(e=r.items)||void 0===e?void 0:e[this.createKey(t)];return n&&!n.removed&&n.txUserNote||""},r.getAllTxsCount=function(){var t=this.getState(),e=0;for(var r in t.items){var n=t.items[r];n&&!n.removed&&(e+=1)}return e},r.getChanges=function(){var t=this.getState(),e=Object.values(fn(ln(t.items,(function(t){return t.removed})),(function(t,e){return{txHash:e}}))),r=Object.values(fn(ln(t.items,(function(t){return 1===t.dirty&&!t.removed})),(function(t){return{txHash:t.txHash,txUserNote:t.txUserNote,createdTime:t.createdTime,updatedTime:t.updatedTime}}))),n=Object.values(fn(ln(t.items,(function(t){return 2===t.dirty&&!t.removed})),(function(t){return{txHash:t.txHash,txUserNote:t.txUserNote,createdTime:t.createdTime,updatedTime:t.updatedTime}})));if(!(cn(e)&&cn(r)&&cn(n)))return{userTx:{update:n,insert:r,remove:e}}},r.reduce=function(t,e){return e.type&&"function"==typeof this.actions[e.type]?this.actions[e.type](t,e):t},n(e,[{key:"key",get:function(){return"userTxs"}},{key:"actions",get:function(){var t;return(t={}).clear_database=this.handleClearDatabase,t.mark_all_as_dirty=this.handleMarkAllAsDirty,t.remove_tx=this.handleRemoveTx,t.replace_tx_note=this.handleReplaceTxNote,t.reset_from_data=this.handleResetFromData,t.reset_from_store=this.handleResetFromStore,t.sync_changes=this.handleSyncChanges,t.update_dirty_status=this.handleUpdateDirtyStatus,t}}]),e}(W))(h);function wn(t){t.addListener((function(){L.store(t.key,t.getState())}))}new(function(t){function e(){return t.apply(this,arguments)||this}s(e,t);var r=e.prototype;return r.getInitialState=function(){return null},r.reduce=function(t,e){return t},e}(W))(h),wn(hn),wn(Tn),wn(gn),wn(yn),wn(On),exports.actions=F,exports.appStore=hn,exports.dispatcher=h,exports.exportStoreToJSON=function(){return o({},yn.getExportJSON(),{},gn.getExportJSON(),{},Tn.getExportJSON(),{},On.getExportJSON())},exports.importStoreFromJSON=function(t){L.reset(),D(t)},exports.initDatabase=function(t){var e,r,n;L.switch(t),j(),null===(e=pn)||void 0===e||e.cancel(),r=0,n=function(t){t&&"ethpuuid"===t.key&&t.newValue&&JSON.parse(t.newValue)!==JSON.parse(t.oldValue)&&L.reset(JSON.parse(t.newValue)),clearTimeout(r),r=setTimeout((function(){var t,e;(hn.getLastSyncedAt()<(null!==(t=null===(e=L.store("app"))||void 0===e?void 0:e.lastSyncedAt)&&void 0!==t?t:1)||"visible"!==document.visibilityState)&&j()}),100)},window.addEventListener("storage",n,!1),pn={cancel:function(){clearTimeout(r),window.removeEventListener("storage",n,!1)}}},exports.localStore=L,exports.registerStore=wn,exports.userAddressesStore=gn,exports.userInfoStore=Tn,exports.userTagsStore=yn,exports.userTxsStore=On;
//# sourceMappingURL=index.js.map
